<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Incidents - Incident Management</title>

    <!-- Favicon -->
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="../assets/img/favicon.png"
    />

    <!-- Apple Touch Icon -->
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="../assets/img/apple-touch-icon.png"
    />

    <!-- Theme Script js -->
    <script src="../assets/js/theme-script.js"></script>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />

    <!-- Feather CSS -->
    <link rel="stylesheet" href="../assets/plugins/icons/feather/feather.css" />

    <!-- Tabler Icon CSS -->
    <link
      rel="stylesheet"
      href="../assets/plugins/tabler-icons/tabler-icons.min.css"
    />

    <!-- Select2 CSS -->
    <link
      rel="stylesheet"
      href="../assets/plugins/select2/css/select2.min.css"
    />

    <!-- Fontawesome CSS -->
    <link
      rel="stylesheet"
      href="../assets/plugins/fontawesome/css/fontawesome.min.css"
    />
    <link
      rel="stylesheet"
      href="../assets/plugins/fontawesome/css/all.min.css"
    />

    <!-- Datetimepicker CSS -->
    <link
      rel="stylesheet"
      href="../assets/css/bootstrap-datetimepicker.min.css"
    />

    <!-- Color Picker Css -->
    <link
      rel="stylesheet"
      href="../assets/plugins/flatpickr/flatpickr.min.css"
    />
    <link
      rel="stylesheet"
      href="../assets/plugins/@simonwep/pickr/themes/nano.min.css"
    />

    <!-- Daterangepikcer CSS -->
    <link
      rel="stylesheet"
      href="../assets/plugins/daterangepicker/daterangepicker.css"
    />

    <!-- Summernote CSS -->
    <link
      rel="stylesheet"
      href="../assets/plugins/summernote/summernote-lite.min.css"
    />

    <!-- Datatable CSS -->
    <link rel="stylesheet" href="../assets/css/dataTables.bootstrap5.min.css" />

    <!-- Daterangepikcer CSS -->
    <link
      rel="stylesheet"
      href="../assets/plugins/daterangepicker/daterangepicker.css"
    />

    <!-- Bootstrap Tagsinput CSS -->
    <link
      rel="stylesheet"
      href="../assets/plugins/bootstrap-tagsinput/bootstrap-tagsinput.css"
    />

    <!-- Color Picker Css -->
    <link
      rel="stylesheet"
      href="../assets/plugins/flatpickr/flatpickr.min.css"
    />
    <link
      rel="stylesheet"
      href="../assets/plugins/@simonwep/pickr/themes/nano.min.css"
    />

    <!-- Select2 CSS -->
    <link
      rel="stylesheet"
      href="../assets/plugins/select2/css/select2.min.css"
    />

    <!-- Main CSS -->
    <link rel="stylesheet" href="../assets/css/style.css" />

    <style>
      .sidebar-inner {
        overflow-y: auto !important;
        height: calc(100vh - 60px) !important;
      }

      .sidebar-menu ul li a.active {
        background: #f5f5f5 !important;
        color: #333 !important;
      }

      .sidebar-menu ul li a:hover {
        background: #f0f0f0 !important;
        color: #333 !important;
      }

      #incidentFormContainer {
        display: none;
      }

      /* Mini sidebar collapse */
      .mini-sidebar .sidebar {
        width: 60px !important;
      }

      .mini-sidebar .sidebar .sidebar-menu ul li a span {
        display: none !important; /* hide menu text */
      }

      .mini-sidebar .sidebar .sidebar-menu ul li a i {
        margin-right: 0 !important;
        font-size: 20px;
      }

      /* .card {
        border-radius: 14px;
        border: 1px solid #eef0f3;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      } */

      .card .table thead th {
        background: #fff;
        font-size: 12px;
        color: #6b7280;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }
      .avatar {
        border-radius: 50%;
      }
    </style>
  </head>

  <body>
    <!-- Sidebar -->

    <div id="sidebar-container"></div>

    <!-- /Sidebar -->
    <div class="main-wrapper">
      <!-- HEADER -->
      <div class="header">
        <div class="main-header">
          <div class="header-left">
            <a href="index.html" class="logo">
              <img src="../assets/img/logo.svg" alt="Logo" />
            </a>
            <a href="index.html" class="dark-logo">
              <img src="../assets/img/logo-white.svg" alt="Logo" />
            </a>
          </div>

          <a id="mobile_btn" class="mobile_btn" href="#sidebar">
            <span class="bar-icon"
              ><span></span><span></span><span></span
            ></span>
          </a>

          <div class="header-user">
            <div class="nav user-menu nav-list">
              <div class="me-auto d-flex align-items-center">
                <a
                  id="toggle_btn"
                  href="javascript:void(0);"
                  class="btn btn-menubar me-1"
                >
                  <i class="ti ti-arrow-bar-to-left"></i>
                </a>

                <div class="input-group input-group-flat d-inline-flex me-1">
                  <span class="input-icon-addon">
                    <i class="ti ti-search"></i>
                  </span>
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Search…"
                  />
                  <span class="input-group-text"><kbd>CTRL + /</kbd></span>
                </div>

                <a href="profile-settings.html" class="btn btn-menubar">
                  <i class="ti ti-settings-cog"></i>
                </a>
              </div>

              <div class="d-flex align-items-center">
                <a href="#" class="btn btn-menubar btnFullscreen"
                  ><i class="ti ti-maximize"></i
                ></a>
                <a href="chat.html" class="btn btn-menubar position-relative">
                  <i class="ti ti-brand-hipchat"></i>
                  <span class="badge bg-info rounded-pill header-badge">5</span>
                </a>
                <a href="email.html" class="btn btn-menubar"
                  ><i class="ti ti-mail"></i
                ></a>

                <div class="dropdown profile-dropdown">
                  <a
                    href="#"
                    class="dropdown-toggle d-flex align-items-center"
                    data-bs-toggle="dropdown"
                  >
                    <span class="avatar avatar-sm online">
                      <img
                        src="../assets/img/profiles/avatar-12.jpg"
                        class="rounded-circle"
                        alt=""
                      />
                    </span>
                  </a>
                  <div class="dropdown-menu shadow-none">
                    <a class="dropdown-item" href="profile.html">My Profile</a>
                    <a class="dropdown-item" href="profile-settings.html"
                      >Settings</a
                    >
                    <a class="dropdown-item" href="login.html">Logout</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- /HEADER -->

      <!-- PAGE WRAPPER -->
      <div class="page-wrapper">
        <div class="content container-fluid">
          <!-- <div class="page-header">
            <h3 class="page-title">Incident Management / Incidents</h3>
            <ul class="breadcrumb">
              <li class="breadcrumb-item">Incident Management</li>
              <li class="breadcrumb-item active">Incidents</li>
            </ul>
          </div> -->

          <div
            class="d-md-flex d-block align-items-center justify-content-between page-breadcrumb mb-3"
          >
            <div class="my-auto mb-2">
              <h2 class="mb-1">Incidents</h2>
              <nav>
                <ol class="breadcrumb mb-0">
                  <li class="breadcrumb-item">
                    <a href="index.html"><i class="ti ti-smart-home"></i></a>
                  </li>
                  <li class="breadcrumb-item">Incident Management</li>
                  <li class="breadcrumb-item active" aria-current="page">
                    Incident Reports
                  </li>
                </ol>
              </nav>
            </div>
            <div
              class="d-flex my-xl-auto right-content align-items-center flex-wrap"
            >
              <div class="mb-2">
                <a
                  href="#"
                  data-bs-toggle="modal"
                  data-bs-target="#reportIncident"
                  class="btn btn-primary d-flex align-items-center"
                  ><i class="ti ti-circle-plus me-2"></i>Report Incident</a
                >
              </div>
              <!-- <div class="head-icons ms-2">
                <a
                  href="javascript:void(0);"
                  class=""
                  data-bs-toggle="tooltip"
                  data-bs-placement="top"
                  data-bs-original-title="Collapse"
                  id="collapse-header"
                >
                  <i class="ti ti-chevrons-up"></i>
                </a>
              </div> -->
            </div>
          </div>

          <!-- STATS -->
          <div class="row">
            <!-- Total Plans -->
            <div class="col-lg-3 col-md-6 d-flex">
              <div class="card flex-fill">
                <div
                  class="card-body d-flex align-items-center justify-content-between"
                >
                  <div class="d-flex align-items-center overflow-hidden">
                    <div>
                      <span class="avatar avatar-lg bg-info rounded-circle"
                        ><i class="ti ti-alert-triangle"></i
                      ></span>
                    </div>
                    <div class="ms-2 overflow-hidden">
                      <p class="fs-12 fw-medium mb-1 text-truncate">
                        Total Incidents
                      </p>
                      <h4>10</h4>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- /Total Plans -->

            <!-- Total Plans -->
            <div class="col-lg-3 col-md-6 d-flex">
              <div class="card flex-fill">
                <div
                  class="card-body d-flex align-items-center justify-content-between"
                >
                  <div class="d-flex align-items-center overflow-hidden">
                    <div>
                      <span class="avatar avatar-lg bg-primary rounded-circle"
                        ><i class="ti ti-alert-triangle"></i
                      ></span>
                    </div>
                    <div class="ms-2 overflow-hidden">
                      <p class="fs-12 fw-medium mb-1 text-truncate">Open</p>
                      <h4>4</h4>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- /Total Plans -->

            <!-- Inactive Plans -->
            <div class="col-lg-3 col-md-6 d-flex">
              <div class="card flex-fill">
                <div
                  class="card-body d-flex align-items-center justify-content-between"
                >
                  <div class="d-flex align-items-center overflow-hidden">
                    <div>
                      <span class="avatar avatar-lg bg-purple rounded-circle"
                        ><i class="ti ti-alert-triangle"></i
                      ></span>
                    </div>
                    <div class="ms-2 overflow-hidden">
                      <p class="fs-12 fw-medium mb-1 text-truncate">
                        In Progress
                      </p>
                      <h4>0</h4>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- /Inactive Companies -->

            <!-- No of Plans  -->
            <div class="col-lg-3 col-md-6 d-flex">
              <div class="card flex-fill">
                <div
                  class="card-body d-flex align-items-center justify-content-between"
                >
                  <div class="d-flex align-items-center overflow-hidden">
                    <div>
                      <span class="avatar avatar-lg bg-success rounded-circle"
                        ><i class="ti ti-alert-triangle"></i
                      ></span>
                    </div>
                    <div class="ms-2 overflow-hidden">
                      <p class="fs-12 fw-medium mb-1 text-truncate">Resolved</p>
                      <h4>6</h4>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- /No of Plans -->
          </div>

          <!-- SEARCH + NEW -->
          <!-- <div class="d-flex justify-content-between align-items-center mb-3">
            <h4 class="mb-0">
              Incidents Database <span class="text-muted">8 items</span>
            </h4>
            <div class="d-flex gap-2">
              <input
                type="text"
                class="form-control"
                placeholder="Search incidents…"
                style="width: 240px"
              />
              <button class="btn btn-light">
                <i class="ti ti-filter"></i> Filter
              </button>
              <button class="btn btn-light">
                <i class="ti ti-layout-grid"></i> View
              </button>
              <button class="btn btn-success" id="btnShowIncidentForm">
                <i class="ti ti-plus"></i> New
              </button>
            </div>
          </div> -->

          <!-- FORM START -->
          <!-- SLIDE-DOWN ADD INCIDENT FORM -->

          <!-- Table card old -->
           <div class="card shadow-sm rounded-4 p-3">
            <!-- ✅ HEADER ROW -->
            <div
              class="d-flex align-items-center justify-content-between flex-wrap gap-3 border-bottom pb-3"
            >
              <div>
                <h5 class="mb-0 fw-semibold">All Records</h5>
                <small class="text-muted">105 total records</small>
              </div>

              <div class="d-flex align-items-center gap-2 flex-wrap">
                <!-- Search -->
                <div class="position-relative">
                  <input
                    type="text"
                    class="form-control ps-5"
                    placeholder="Filter records..."
                    style="width: 260px"
                  />
                  <span
                    class="position-absolute top-50 start-0 translate-middle-y ps-3 text-muted"
                  >
                    <i class="ti ti-search"></i>
                  </span>
                </div>

                <!-- View -->
                <div class="dropdown me-0">
                  <button
                    class="btn btn-outline d-flex align-items-center border gap-2"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <i class="ti ti-list"></i>
                    View
                    <i class="ti ti-chevron-down ms-1"></i>
                  </button>

                  <ul class="dropdown-menu dropdown-menu-end">
                    <li>
                      <a
                        class="dropdown-item active"
                        href="javascript:void(0);"
                      >
                        <i class="ti ti-check me-2"></i> Table View
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="javascript:void(0);">
                        Card View
                      </a>
                    </li>
                  </ul>
                </div>

                <!-- Filter -->
                <button
                  class="btn btn-white border d-flex align-items-center gap-2"
                >
                  <i class="ti ti-filter"></i> Filter
                </button>

                <!-- Columns -->
                <div class="dropdown me-3">
                  <button
                    class="btn btn-white d-inline-flex align-items-center border gap-2"
                    data-bs-toggle="dropdown"
                  >
                    <i class="ti ti-columns"></i>
                    Columns
                  </button>

                  <ul class="dropdown-menu dropdown-menu-end p-3">
                    <li class="dropdown-item d-flex align-items-center gap-2">
                      <i class="ti ti-check text-primary"></i> Type
                    </li>
                    <li class="dropdown-item d-flex align-items-center gap-2">
                      <i class="ti ti-check text-primary"></i> Reference
                    </li>
                    <li class="dropdown-item d-flex align-items-center gap-2">
                      <i class="ti ti-check text-primary"></i> Description
                    </li>
                    <li class="dropdown-item d-flex align-items-center gap-2">
                      <i class="ti ti-check text-primary"></i> Priority
                    </li>
                    <li class="dropdown-item d-flex align-items-center gap-2">
                      <i class="ti ti-check text-primary"></i> Status
                    </li>
                    <li class="dropdown-item d-flex align-items-center gap-2">
                      <i class="ti ti-check text-primary"></i> Assigned To
                    </li>
                    <li class="dropdown-item d-flex align-items-center gap-2">
                      <i class="ti ti-check text-primary"></i> Date
                    </li>
                  </ul>
                </div>

                <!-- Create Button -->
                <a
                  href="#"
                  data-bs-toggle="modal"
                  data-bs-target="#reportIncident"
                  class="btn btn-primary d-flex align-items-center gap-2"
                >
                  <i class="ti ti-upload"></i> Report Incident
                </a>
              </div>
            </div>

            <!-- ✅ SECOND FILTER ROW -->
            <div class="d-flex gap-2 flex-wrap py-3 border-bottom">
              <!--  ALL Priority -->
              <div class="dropdown">
                <button
                  class="btn btn-light border dropdown-toggle"
                  type="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  All Priority
                </button>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#">All Priority</a></li>
                  <li><a class="dropdown-item" href="#">Low</a></li>
                  <li><a class="dropdown-item" href="#">Medium</a></li>
                  <li><a class="dropdown-item" href="#">High</a></li>
                  <li><a class="dropdown-item" href="#">Urgent</a></li>
                </ul>
              </div>
              <!--  ALL Status -->
              <div class="dropdown">
                <button
                  class="btn btn-light border dropdown-toggle"
                  type="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  All Status
                </button>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#">All Status</a></li>
                  <li><a class="dropdown-item" href="#">Open</a></li>
                  <li><a class="dropdown-item" href="#">Pending</a></li>
                  <li><a class="dropdown-item" href="#">Completed</a></li>
                </ul>
              </div>
              <!--  ALL PROPERTIES -->
              <div class="dropdown">
                <button
                  class="btn btn-light border dropdown-toggle"
                  type="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  All Properties
                </button>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#">All Properties</a></li>
                  <li><a class="dropdown-item" href="#">Garden House</a></li>
                  <li><a class="dropdown-item" href="#">Crown Lodge</a></li>
                  <li><a class="dropdown-item" href="#">Trident Elite</a></li>
                </ul>
              </div>
            </div>

            <!-- ✅ TABLE (NOW INSIDE SAME CARD) -->
             <div class="table-responsive mt-3">
              <table class="table mb-0">
                <thead>
                  <tr>
                    <!-- ✅ CHECKBOX (NO SORT) -->
                    <th>
                      <input class="form-check-input" type="checkbox" />
                    </th>

                    <!-- ✅ TYPE -->
                    <th
                      class="header-th"
                      data-col="1"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-tag me-1"></i>
                        <span>Type</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ REFERENCE -->
                    <th
                      class="header-th"
                      data-col="2"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-file-text me-1"></i>
                        <span>Reference</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ DESCRIPTION -->
                    <th
                      class="header-th"
                      data-col="3"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-file-description me-1"></i>
                        <span>Description</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ PRIORITY -->
                    <th
                      class="header-th"
                      data-col="4"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-alert-circle me-1"></i>
                        <span>Priority</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ STATUS -->
                    <th
                      class="header-th"
                      data-col="5"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-activity me-1"></i>
                        <span>Status</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ ASSIGNED TO -->
                    <th
                      class="header-th"
                      data-col="6"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-user me-1"></i>
                        <span>Assigned To</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ DATE -->
                    <th
                      class="header-th"
                      data-col="7"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-calendar me-1"></i>
                        <span>Date</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ ACTIONS (UNCHANGED AS PER YOUR REQUIREMENT) -->
                    <th><i class="ti ti-dots me-1"></i> Actions</th>
                  </tr>
                </thead>

                <tbody>
                  <!-- ✅ EXISTING ROWS (UNCHANGED STRUCTURE) -->
                  <tr>
                    <td><input class="form-check-input" type="checkbox" /></td>
                    <td>
                      <span
                        class="badge rounded-pill border text-warning bg-light"
                      >
                        Incident
                      </span>
                    </td>

                    <td>
                      <strong>INC-2025-</strong><br />
                      <small class="text-muted">e5198a6e</small>
                    </td>

                    <td>
                      <strong>self-harm</strong><br />
                      <small class="text-muted">
                        Property damage discovered during routine inspection..
                      </small>
                    </td>

                    <td><span class="text-warning">● Medium</span></td>
                    <td><span class="text-success">● Completed</span></td>

                    <td class="d-flex align-items-center gap-2">
                      <span class="avatar bg-warning text-white">AM</span>
                      <span>Manager Smith</span>
                    </td>

                    <td>Feb 8, 2025</td>

                    <td>
                      <i class="ti ti-edit me-2"></i>
                      <i class="ti ti-trash"></i>
                    </td>
                  </tr>

                  <tr>
                    <td><input class="form-check-input" type="checkbox" /></td>
                    <td>
                      <span
                        class="badge rounded-pill border text-warning bg-light"
                      >
                        Incident
                      </span>
                    </td>

                    <td>
                      <strong>INC-2025-</strong><br />
                      <small>c51690eb</small>
                    </td>

                    <td>
                      <strong>self-harm</strong><br />
                      <small class="text-muted">
                        Noise complaint reported by neighboring room.
                      </small>
                    </td>

                    <td><span class="text-warning">● Medium</span></td>
                    <td><span class="text-warning">● Pending</span></td>

                    <td class="text-muted">Unassigned</td>
                    <td>Sep 26, 2025</td>

                    <td>
                      <i class="ti ti-edit me-2"></i>
                      <i class="ti ti-trash"></i>
                    </td>
                  </tr>

                  <tr>
                    <td><input class="form-check-input" type="checkbox" /></td>
                    <td>
                      <span
                        class="badge rounded-pill border text-warning bg-light"
                      >
                        Incident
                      </span>
                    </td>

                    <td>
                      <strong>INC-2025-</strong><br />
                      <small>cda9bd4e</small>
                    </td>

                    <td>
                      <strong>substance-abuse</strong><br />
                      <small class="text-muted">
                        Resident reported feeling unwell, medical assistance...
                      </small>
                    </td>

                    <td><span class="text-success">● Low</span></td>
                    <td><span class="text-success">● Completed</span></td>

                    <td class="d-flex align-items-center gap-2">
                      <span class="avatar bg-info text-white">IT</span>
                      <span>In-house Team</span>
                    </td>

                    <td>Jun 2, 2025</td>

                    <td>
                      <i class="ti ti-edit me-2"></i>
                      <i class="ti ti-trash"></i>
                    </td>
                  </tr>

                  <!-- ✅ NEW ROWS ADDED -->

                  <tr>
                    <td><input class="form-check-input" type="checkbox" /></td>
                    <td>
                      <span
                        class="badge rounded-pill border text-warning bg-light"
                      >
                        Incident
                      </span>
                    </td>

                    <td>
                      <strong>INC-2025-</strong><br />
                      <small>2b9c6ef8</small>
                    </td>

                    <td>
                      <strong>maintenance-urgent</strong><br />
                      <small class="text-muted">
                        Resident reported missing personal items.
                      </small>
                    </td>

                    <td><span class="text-danger">● Urgent</span></td>
                    <td><span class="text-success">● Completed</span></td>

                    <td class="d-flex align-items-center gap-2">
                      <span class="avatar bg-primary text-white">QF</span>
                      <span>Quick Fix Services</span>
                    </td>

                    <td>Mar 17, 2025</td>

                    <td>
                      <i class="ti ti-edit me-2"></i>
                      <i class="ti ti-trash"></i>
                    </td>
                  </tr>

                  <tr>
                    <td><input class="form-check-input" type="checkbox" /></td>
                    <td>
                      <span
                        class="badge rounded-pill border text-warning bg-light"
                      >
                        Incident
                      </span>
                    </td>

                    <td>
                      <strong>INC-2025-</strong><br />
                      <small>ca81318f</small>
                    </td>

                    <td>
                      <strong>substance-abuse</strong><br />
                      <small class="text-muted">
                        Resident reported missing personal items.
                      </small>
                    </td>

                    <td><span class="text-warning">● Medium</span></td>
                    <td><span class="text-success">● Completed</span></td>

                    <td class="d-flex align-items-center gap-2">
                      <span class="avatar bg-primary text-white">QF</span>
                      <span>Quick Fix Services</span>
                    </td>

                    <td>Oct 24, 2024</td>

                    <td>
                      <i class="ti ti-edit me-2"></i>
                      <i class="ti ti-trash"></i>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Table card old -->

          <!-- Table card new -->

          <div class="card shadow-sm rounded-4 p-2">
            <!-- ✅ HEADER ROW -->
            <div
              class="card-header d-flex align-items-center justify-content-between flex-wrap row-gap-3 mb-2"
            >
              <div>
                <h5>All Records</h5>
                <small class="text-muted">105 total records</small>
              </div>

              <div
                class="d-flex my-xl-auto right-content align-items-center flex-wrap row-gap-3"
              >
                <div class="me-3">
                  <div class="position-relative">
                    <input
                      type="text"
                      class="form-control ps-5"
                      placeholder="Filter records..."
                    />
                    <span
                      class="position-absolute top-50 start-0 translate-middle-y ps-3 text-muted"
                    >
                      <i class="ti ti-search"></i>
                    </span>
                  </div>
                </div>

                <div class="dropdown me-3">
                  <button
                    class="btn btn-outline d-flex align-items-center border gap-2"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <i class="ti ti-list"></i>
                    View
                    <i class="ti ti-chevron-down ms-1"></i>
                  </button>

                  <ul class="dropdown-menu dropdown-menu-end">
                    <li>
                      <a
                        class="dropdown-item active"
                        href="javascript:void(0);"
                      >
                        <i class="ti ti-check me-2"></i> Table View
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="javascript:void(0);">
                        Card View
                      </a>
                    </li>
                  </ul>
                </div>

                <!-- Filter Dropdown -->
                <div class="dropdown position-relative me-3">
                  <button
                    class="dropdown-toggle btn d-inline-flex align-items-center justify-content-between w-100 gap-2"
                    type="button"
                    id="dateFilterBtn"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <div class="d-flex align-items-center gap-2">
                      <i class="ti ti-filter"></i>
                      <span id="selectedDateText">Filter</span>
                    </div>
                  </button>
                </div>
                <div class="dropdown me-3">
                  <button
                    class="btn btn-white d-inline-flex align-items-center border gap-2"
                    data-bs-toggle="dropdown"
                  >
                    <i class="ti ti-columns"></i>
                    Columns
                  </button>

                  <ul class="dropdown-menu dropdown-menu-end p-3">
                    <li class="dropdown-item d-flex align-items-center gap-2">
                      <i class="ti ti-check text-primary"></i> Type
                    </li>
                    <li class="dropdown-item d-flex align-items-center gap-2">
                      <i class="ti ti-check text-primary"></i> Reference
                    </li>
                    <li class="dropdown-item d-flex align-items-center gap-2">
                      <i class="ti ti-check text-primary"></i> Description
                    </li>
                    <li class="dropdown-item d-flex align-items-center gap-2">
                      <i class="ti ti-check text-primary"></i> Priority
                    </li>
                    <li class="dropdown-item d-flex align-items-center gap-2">
                      <i class="ti ti-check text-primary"></i> Status
                    </li>
                    <li class="dropdown-item d-flex align-items-center gap-2">
                      <i class="ti ti-check text-primary"></i> Assigned To
                    </li>
                    <li class="dropdown-item d-flex align-items-center gap-2">
                      <i class="ti ti-check text-primary"></i> Date
                    </li>
                  </ul>
                </div>

                <div>
                  <a
                    href="#"
                    data-bs-toggle="modal"
                    data-bs-target="#reportIncident"
                    class="btn btn-primary d-flex align-items-center"
                    ><i class="ti ti-upload me-2"></i>Report Incident</a
                  >
                </div>
              </div>
            </div>

            <!-- ✅ SECOND FILTER ROW -->
            <div class="d-flex gap-2 flex-wrap py-3 border-bottom">
              <!--  ALL Priority -->
              <div class="dropdown">
                <button
                  class="btn btn-light border dropdown-toggle"
                  type="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  All Severity
                </button>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#">All Severity</a></li>
                  <li><a class="dropdown-item" href="#">Low</a></li>
                  <li><a class="dropdown-item" href="#">Medium</a></li>
                  <li><a class="dropdown-item" href="#">High</a></li>
                  <li><a class="dropdown-item" href="#">Critical</a></li>
                </ul>
              </div>
              <!--  ALL Status -->
              <div class="dropdown">
                <button
                  class="btn btn-light border dropdown-toggle"
                  type="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  All Status
                </button>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#">All Status</a></li>
                  <li><a class="dropdown-item" href="#">Open</a></li>
                  <li><a class="dropdown-item" href="#">Pending</a></li>
                  <li><a class="dropdown-item" href="#">Completed</a></li>
                </ul>
              </div>
              <!--  ALL PROPERTIES -->
              <div class="dropdown">
                <button
                  class="btn btn-light border dropdown-toggle"
                  type="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  All Properties
                </button>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#">All Properties</a></li>
                  <li><a class="dropdown-item" href="#">Garden House</a></li>
                  <li><a class="dropdown-item" href="#">Crown Lodge</a></li>
                  <li><a class="dropdown-item" href="#">Trident Elite</a></li>
                </ul>
              </div>
            </div>

            <!-- ✅ TABLE (NOW INSIDE SAME CARD) -->
            <div class="table-responsive mt-3">
              <table class="table mb-0">
                <thead>
                  <tr>
                    <!-- ✅ CHECKBOX (NO SORT) -->
                    <th>
                      <input class="form-check-input" type="checkbox" />
                    </th>

                    <!-- ✅ TYPE -->
                    <th
                      class="header-th"
                      data-col="1"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-tag me-1"></i>
                        <span>Type</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ REFERENCE -->
                    <th
                      class="header-th"
                      data-col="2"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-file-text me-1"></i>
                        <span>Reference</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ DESCRIPTION -->
                    <th
                      class="header-th"
                      data-col="3"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-file-description me-1"></i>
                        <span>Description</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ PRIORITY -->
                    <th
                      class="header-th"
                      data-col="4"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-alert-circle me-1"></i>
                        <span>Priority</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ STATUS -->
                    <th
                      class="header-th"
                      data-col="5"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-activity me-1"></i>
                        <span>Status</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ ASSIGNED TO -->
                    <th
                      class="header-th"
                      data-col="6"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-user me-1"></i>
                        <span>Assigned To</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ DATE -->
                    <th
                      class="header-th"
                      data-col="7"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-calendar me-1"></i>
                        <span>Date</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ ACTIONS (UNCHANGED AS PER YOUR REQUIREMENT) -->
                    <th><i class="ti ti-dots me-1"></i> Actions</th>
                  </tr>
                </thead>

                <tbody>
                  <!-- ✅ EXISTING ROWS (UNCHANGED STRUCTURE) -->
                  <tr>
                    <td><input class="form-check-input" type="checkbox" /></td>
                    <td>
                      <span
                        class="badge rounded-pill border text-warning bg-light"
                      >
                        Incident
                      </span>
                    </td>

                    <td>
                      <strong>INC-2025-</strong><br />
                      <small class="text-muted">e5198a6e</small>
                    </td>

                    <td>
                      <strong>self-harm</strong><br />
                      <small class="text-muted">
                        Property damage discovered during routine inspection..
                      </small>
                    </td>

                    <td><span class="text-warning">● Medium</span></td>
                    <td><span class="text-success">● Completed</span></td>

                    <td class="d-flex align-items-center gap-2">
                      <span class="avatar bg-warning text-white">AM</span>
                      <span>Manager Smith</span>
                    </td>

                    <td>Feb 8, 2025</td>

                    <td>
                      <i class="ti ti-edit me-2"></i>
                      <i class="ti ti-trash"></i>
                    </td>
                  </tr>

                  <tr>
                    <td><input class="form-check-input" type="checkbox" /></td>
                    <td>
                      <span
                        class="badge rounded-pill border text-warning bg-light"
                      >
                        Incident
                      </span>
                    </td>

                    <td>
                      <strong>INC-2025-</strong><br />
                      <small>c51690eb</small>
                    </td>

                    <td>
                      <strong>self-harm</strong><br />
                      <small class="text-muted">
                        Noise complaint reported by neighboring room.
                      </small>
                    </td>

                    <td><span class="text-warning">● Medium</span></td>
                    <td><span class="text-warning">● Pending</span></td>

                    <td class="text-muted">Unassigned</td>
                    <td>Sep 26, 2025</td>

                    <td>
                      <i class="ti ti-edit me-2"></i>
                      <i class="ti ti-trash"></i>
                    </td>
                  </tr>

                  <tr>
                    <td><input class="form-check-input" type="checkbox" /></td>
                    <td>
                      <span
                        class="badge rounded-pill border text-warning bg-light"
                      >
                        Incident
                      </span>
                    </td>

                    <td>
                      <strong>INC-2025-</strong><br />
                      <small>cda9bd4e</small>
                    </td>

                    <td>
                      <strong>substance-abuse</strong><br />
                      <small class="text-muted">
                        Resident reported feeling unwell, medical assistance...
                      </small>
                    </td>

                    <td><span class="text-success">● Low</span></td>
                    <td><span class="text-success">● Completed</span></td>

                    <td class="d-flex align-items-center gap-2">
                      <span class="avatar bg-info text-white">IT</span>
                      <span>In-house Team</span>
                    </td>

                    <td>Jun 2, 2025</td>

                    <td>
                      <i class="ti ti-edit me-2"></i>
                      <i class="ti ti-trash"></i>
                    </td>
                  </tr>

                  <!-- ✅ NEW ROWS ADDED -->

                  <tr>
                    <td><input class="form-check-input" type="checkbox" /></td>
                    <td>
                      <span
                        class="badge rounded-pill border text-warning bg-light"
                      >
                        Incident
                      </span>
                    </td>

                    <td>
                      <strong>INC-2025-</strong><br />
                      <small>2b9c6ef8</small>
                    </td>

                    <td>
                      <strong>maintenance-urgent</strong><br />
                      <small class="text-muted">
                        Resident reported missing personal items.
                      </small>
                    </td>

                    <td><span class="text-danger">● Urgent</span></td>
                    <td><span class="text-success">● Completed</span></td>

                    <td class="d-flex align-items-center gap-2">
                      <span class="avatar bg-primary text-white">QF</span>
                      <span>Quick Fix Services</span>
                    </td>

                    <td>Mar 17, 2025</td>

                    <td>
                      <i class="ti ti-edit me-2"></i>
                      <i class="ti ti-trash"></i>
                    </td>
                  </tr>

                  <tr>
                    <td><input class="form-check-input" type="checkbox" /></td>
                    <td>
                      <span
                        class="badge rounded-pill border text-warning bg-light"
                      >
                        Incident
                      </span>
                    </td>

                    <td>
                      <strong>INC-2025-</strong><br />
                      <small>ca81318f</small>
                    </td>

                    <td>
                      <strong>substance-abuse</strong><br />
                      <small class="text-muted">
                        Resident reported missing personal items.
                      </small>
                    </td>

                    <td><span class="text-warning">● Medium</span></td>
                    <td><span class="text-success">● Completed</span></td>

                    <td class="d-flex align-items-center gap-2">
                      <span class="avatar bg-primary text-white">QF</span>
                      <span>Quick Fix Services</span>
                    </td>

                    <td>Oct 24, 2024</td>

                    <td>
                      <i class="ti ti-edit me-2"></i>
                      <i class="ti ti-trash"></i>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          
        </div>
      </div>

      <!-- Table card new -->

      <!-- /Incident Form -->
      <div class="modal fade" id="reportIncident" tabindex="-1">
        <div
          class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable"
        >
          <div class="modal-content">
            <!-- ✅ HEADER -->
            <div class="modal-header">
              <div>
                <h4 class="modal-title">Incident Report</h4>
                <p class="text-muted mb-0">
                  Standard form for reporting incidents at properties
                </p>
              </div>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
              ></button>
            </div>

            <!-- ✅ BODY -->
            <div class="modal-body">
              <div class="row">
                <!-- Incident Type -->
                <div class="col-md-6 mb-3">
                  <label class="form-label"
                    >Incident Type <span class="text-danger">*</span></label
                  >
                  <select class="form-select" required>
                    <option selected disabled>Select type</option>
                    <option>Self-harm</option>
                    <option>Substance Abuse</option>
                    <option>Complaint</option>
                    <option>Maintenance</option>
                  </select>
                </div>

                <!-- Severity -->
                <div class="col-md-6 mb-3">
                  <label class="form-label"
                    >Severity <span class="text-danger">*</span></label
                  >
                  <select class="form-select" required>
                    <option>Low</option>
                    <option selected>Medium</option>
                    <option>High</option>
                    <option>Critical</option>
                  </select>
                </div>

                <!-- Property -->
                <div class="col-md-6 mb-3">
                  <label class="form-label"
                    >Property <span class="text-danger">*</span></label
                  >
                  <select class="form-select" required>
                    <option selected disabled>Select property</option>
                    <option>Garden House Hotel</option>
                    <option>Crown Lodge Hotel</option>
                    <option>Trident Elite</option>
                    <option>Marriott Waterfront</option>
                  </select>
                </div>

                <!-- Service User -->
                <div class="col-md-6 mb-3">
                  <label class="form-label">Service User</label>
                  <select class="form-select">
                    <option selected disabled>
                      Select service user (optional)
                    </option>
                    <option>Dalia Mohammed</option>
                    <option>Rana Yusuf</option>
                    <option>Nasser Hamid</option>
                    <option>Amina Farah</option>
                  </select>
                </div>

                <!-- Description -->
                <div class="col-12 mb-3">
                  <label class="form-label"
                    >Description <span class="text-danger">*</span></label
                  >
                  <textarea
                    class="form-control"
                    rows="4"
                    placeholder="Detailed description of the incident..."
                    required
                  ></textarea>
                  <small class="text-muted">
                    Include all relevant details about what happened
                  </small>
                </div>

                <!-- Reported By -->
                <div class="col-md-6 mb-3">
                  <label class="form-label"
                    >Reported By <span class="text-danger">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Name of person reporting"
                    required
                  />
                </div>

                <!-- Reported Date -->
                <div class="col-md-6 mb-3">
                  <label class="form-label"
                    >Reported Date <span class="text-danger">*</span></label
                  >
                  <div class="input-group">
                    <input type="date" class="form-control" required />
                    <span class="input-group-text">
                      <i class="ti ti-calendar"></i>
                    </span>
                  </div>
                </div>

                <!-- Assigned To -->
                <div class="col-md-6 mb-3">
                  <label class="form-label">Assigned To</label>
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Name of person handling incident"
                  />
                </div>

                <!-- Status -->
                <div class="col-md-6 mb-3">
                  <label class="form-label"
                    >Status <span class="text-danger">*</span></label
                  >
                  <select class="form-select" required>
                    <option selected>Open</option>
                    <option>In-progress</option>
                    <option>Closed</option>
                    <option>Resolved</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- ✅ FOOTER -->
            <div class="modal-footer d-flex justify-content-end gap-2">
              <button
                type="button"
                class="btn btn-outline-secondary"
                data-bs-dismiss="modal"
              >
                Cancel
              </button>
              <button type="button" class="btn btn-primary">Submit Form</button>
            </div>
          </div>
        </div>
      </div>

      <!-- /Process Move-In -->
    </div>

    <script>
      fetch("../assets/includes/sidebar.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("sidebar-container").innerHTML = data;
        });
    </script>

    <!-- jQuery -->
    <script src="../assets/js/jquery-3.7.1.min.js"></script>

    <!-- Bootstrap Core JS -->
    <script src="../assets/js/bootstrap.bundle.min.js"></script>

    <!-- Feather Icon JS -->
    <script src="../assets/js/feather.min.js"></script>

    <!-- Slimscroll JS -->
    <script src="../assets/js/jquery.slimscroll.min.js"></script>

    <!-- Datetimepicker JS -->
    <script src="../assets/js/moment.min.js"></script>
    <script src="../assets/js/bootstrap-datetimepicker.min.js"></script>

    <!-- Color Picker JS -->
    <script src="../assets/plugins/@simonwep/pickr/pickr.es5.min.js"></script>

    <!-- Datatable JS -->
    <script src="../assets/js/jquery.dataTables.min.js"></script>
    <script src="../assets/js/dataTables.bootstrap5.min.js"></script>

    <!-- Daterangepikcer JS -->
    <script src="../assets/js/moment.min.js"></script>
    <script src="../assets/plugins/daterangepicker/daterangepicker.js"></script>

    <!-- Summernote JS -->
    <script src="../assets/plugins/summernote/summernote-lite.min.js"></script>

    <!-- Bootstrap Tagsinput JS -->
    <script src="../assets/plugins/bootstrap-tagsinput/bootstrap-tagsinput.js"></script>

    <!-- Select2 JS -->
    <script src="../assets/plugins/select2/js/select2.min.js"></script>

    <!-- Chart JS -->
    <script src="../assets/plugins/apexchart/apexcharts.min.js"></script>
    <script src="../assets/plugins/apexchart/chart-data.js"></script>

    <!-- Custom JS -->
    <script src="../assets/js/theme-colorpicker.js"></script>
    <!-- <script src="../assets/js/script.js"></script> -->

    <script>
      // Sidebar toggle (collapse / expand)
      $(document).on("click", "#toggle_btn", function () {
        $("body").toggleClass("mini-sidebar");

        if (!$("body").hasClass("mini-sidebar")) {
          $(".subdrop + ul").slideDown();
        } else {
          $(".subdrop + ul").slideUp();
        }

        return false;
      });
    </script>

    <!-- JAVASCRIPT FOR SLIDE-FORM -->
    <script>
      $(document).ready(function () {
        const $formContainer = $("#incidentFormContainer");
        const $btnShow = $("#btnShowIncidentForm");
        const $btnCancelTop = $("#btnCancelIncident");
        const $btnCancelBottom = $("#btnCancelBottom");
        const $form = $("#incidentForm");

        // Show slide-down form
        $btnShow.on("click", function (e) {
          e.preventDefault();
          $form[0].reset();
          $formContainer.slideDown(250, () => {
            $formContainer[0].scrollIntoView({ behavior: "smooth" });
            $("#incidentTitle").focus();
          });
        });

        // Hide form
        function hideForm() {
          $formContainer.slideUp(200);
        }

        $btnCancelTop.on("click", hideForm);
        $btnCancelBottom.on("click", hideForm);

        // Save new incident
        $form.on("submit", function (e) {
          e.preventDefault();

          const title = $("#incidentTitle").val();
          const date = $("#incidentDate").val()
            ? new Date($("#incidentDate").val()).toLocaleDateString()
            : "-";

          const location = $("#incidentLocation").val() || "-";
          const reportedBy = $("#incidentReportedBy").val() || "-";
          const status = $("#incidentStatus").val() || "Open";
          const dueDate = $("#incidentDueDate").val()
            ? new Date($("#incidentDueDate").val()).toLocaleDateString()
            : "-";

          const severity = $("#incidentSeverity").val();
          let severityHTML = "";
          let borderColor = "";

          if (severity === "HIGH") {
            severityHTML = `<span class="text-danger fw-bold">HIGH</span>`;
            borderColor = "#d32f2f";
          } else if (severity === "MEDIUM") {
            severityHTML = `<span style="color:#d49a00;font-weight:600;">MEDIUM</span>`;
            borderColor = "#f4b400";
          } else {
            severityHTML = `<span style="color:#2e7d32;font-weight:600;">LOW</span>`;
            borderColor = "#4caf50";
          }

          const newRow = `
        <tr style="border-left:4px solid ${borderColor}">
          <td>${title}</td>
          <td>${date}</td>
          <td>${severityHTML}</td>
          <td>${location}</td>
          <td>${reportedBy}</td>
          <td>${status}</td>
          <td>${dueDate}</td>
          <td><i class="ti ti-edit me-2"></i><i class="ti ti-trash"></i></td>
        </tr>
      `;

          $(".table tbody").prepend(newRow);

          hideForm();
        });
      });
    </script>

    <script>
      function toggleGenericMenu(event, btn) {
        event.stopPropagation();

        const dropdown = btn.closest("th").querySelector(".category-dropdown");
        const isOpen = !dropdown.classList.contains("d-none");

        // Close all first
        document.querySelectorAll(".category-dropdown").forEach((menu) => {
          menu.classList.add("d-none");
        });

        // Toggle only this one
        if (!isOpen) {
          dropdown.classList.remove("d-none");
        }
      }

      /* Close all dropdowns on outside click */
      document.addEventListener("click", function () {
        document.querySelectorAll(".category-dropdown").forEach((menu) => {
          menu.classList.add("d-none");
        });
      });

      /* Prevent dropdown click from closing itself */
      document.querySelectorAll(".category-dropdown").forEach((dd) => {
        dd.addEventListener("click", function (e) {
          e.stopPropagation();
        });
      });
    </script>

    <script>
      let genericSortState = {}; // keeps state per column

      function toggleGenericSort(el) {
        const th = el.closest("th");
        const colIndex = Number(th.dataset.col);
        if (Number.isNaN(colIndex)) return;

        const table = document.querySelector("table");
        const tbody = table.querySelector("tbody");
        const rows = Array.from(tbody.querySelectorAll("tr"));

        // ✅ init only once
        if (!(colIndex in genericSortState)) {
          genericSortState[colIndex] = true; // first time: A → Z
        }
        const isAZ = genericSortState[colIndex];

        rows.sort((a, b) => {
          let A = a.children[colIndex].innerText.trim();
          let B = b.children[colIndex].innerText.trim();

          // Try date sort first
          if (!isNaN(Date.parse(A)) && !isNaN(Date.parse(B))) {
            return isAZ ? new Date(A) - new Date(B) : new Date(B) - new Date(A);
          }

          A = A.toUpperCase();
          B = B.toUpperCase();
          return isAZ ? A.localeCompare(B) : B.localeCompare(A);
        });

        rows.forEach((row) => tbody.appendChild(row));

        // Update label text
        const label = el.querySelector(".sort-label");
        if (label) {
          label.innerText = isAZ ? "Sort Z → A" : "Sort A → Z";
        }

        // ✅ flip state for next click
        genericSortState[colIndex] = !isAZ;

        const dropdown = th.querySelector(".category-dropdown");
        if (dropdown) dropdown.classList.add("d-none");
      }
    </script>

    <script>
      function hideGenericColumn(el) {
        const th = el.closest("th");
        const colIndex = parseInt(th.dataset.col);
        const table = document.querySelector("table");

        // Hide header
        th.style.display = "none";

        // Hide column cells
        table.querySelectorAll("tbody tr").forEach((row) => {
          row.children[colIndex].style.display = "none";
        });
      }
    </script>

    <script>
      let isCategorySortedAZ = true; // default state

      function toggleCategorySort() {
        const table = document.querySelector("table");
        const tbody = table.querySelector("tbody");
        const rows = Array.from(tbody.querySelectorAll("tr"));

        rows.sort((a, b) => {
          const catA = a.children[2].innerText.trim().toUpperCase(); // Category column
          const catB = b.children[2].innerText.trim().toUpperCase();

          return isCategorySortedAZ
            ? catA.localeCompare(catB) // A → Z
            : catB.localeCompare(catA); // Z → A
        });

        // Re-append rows
        rows.forEach((row) => tbody.appendChild(row));

        // Toggle label text
        const label = document.getElementById("sortLabel");
        label.innerText = isCategorySortedAZ ? "Sort Z → A" : "Sort A → Z";

        // Flip state
        isCategorySortedAZ = !isCategorySortedAZ;

        // Close dropdown
        document.getElementById("categoryDropdown").classList.add("d-none");
      }
    </script>
    <script>
      function toggleCategoryMenu(event) {
        event.stopPropagation();
        const dropdown = document.getElementById("categoryDropdown");
        dropdown.classList.toggle("d-none");
      }

      // Close menu when clicking outside
      document.addEventListener("click", function () {
        const dd = document.getElementById("categoryDropdown");
        if (dd && !dd.classList.contains("d-none")) {
          dd.classList.add("d-none");
        }
      });
    </script>
  </body>
</html>
