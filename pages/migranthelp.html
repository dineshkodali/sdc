<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=0"
    />
    <title>Migrant Help - Operations Hub</title>

    <!-- Favicon -->
    <link rel="shortcut icon" href="../assets/img/favicon.png" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />

    <!-- Feather Icons -->
    <link rel="stylesheet" href="../assets/plugins/icons/feather/feather.css" />

    <!-- Tabler Icons -->
    <link
      rel="stylesheet"
      href="../assets/plugins/tabler-icons/tabler-icons.min.css"
    />

    <!-- Fontawesome -->
    <link
      rel="stylesheet"
      href="../assets/plugins/fontawesome/css/all.min.css"
    />

    <!-- Main CSS -->
    <link rel="stylesheet" href="../assets/css/style.css" />
  </head>

  <style>
    /* .sidebar-inner {
      overflow-y: auto !important;
      height: calc(100vh - 60px) !important;
    }

    .sidebar-menu ul li a.active {
      background: #f5f5f5 !important;
      color: #333 !important;
    }

    .sidebar-menu ul li a:hover {
      background: #f0f0f0 !important;
      color: #333 !important;
    } */
    /* Mini sidebar collapse */
    /* .mini-sidebar .sidebar {
      width: 60px !important;
    }

    .mini-sidebar .sidebar .sidebar-menu ul li a span {
      display: none !important; 
    }

    .mini-sidebar .sidebar .sidebar-menu ul li a i {
      margin-right: 0 !important;
      font-size: 20px;
    } */

    /* Card-style background for the whole tab bar */
    #taskTabs {
      background: #f5f7fa; /* light card background */
      padding: 8px 10px;
      border-radius: 10px;
      display: inline-flex;
      gap: 8px;
      border: 1px solid #e3e6eb;
    }

    /* Individual tabs */
    #taskTabs .nav-link {
      border-radius: 8px;
      color: #444;
      font-weight: 500;
      padding: 8px 14px;
      border: none;
      background: transparent;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* Active tab (white card look) */
    #taskTabs .nav-link.active {
      background: #ffffff;
      color: #000;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
    }

    /* Hover effect */
    #taskTabs .nav-link:hover {
      background: #ffffff;
    }

    .card .table thead th {
      background: #fff;
      font-size: 12px;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    .avatar {
      /* width: 36px;
      height: 36px; */
      border-radius: 50%;
      /* display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 13px;
      box-shadow: none !important;
      border: none !important; */
    }

    
    .kanban-header-box {
      border-radius: 12px;
      padding: 14px 18px;
      font-weight: 600;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .kanban-count {
      background: #fff;
      padding: 3px 10px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
    }

    .kanban-column {
      padding: 10px;
      border-radius: 12px;
      background: transparent;
    }

    .kanban-card-container {
      background: #ffffff;
      border-radius: 12px;
      padding: 18px;
      border: none;
      box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
      margin-bottom: 16px;
    }

    /* CATEGORY LABELS */
    .cat1 {
      background: #fde1e1;
      color: #c64a4a;
    }
    .cat2 {
      background: #fff5c7;
      color: #b38a00;
    }
    .cat3 {
      background: #dbffe7;
      color: #2e7d32;
    }

    .cat-pill {
      display: inline-block;
      padding: 4px 14px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .metric-card {
      background: #fff;
      border-radius: 16px;
      padding: 22px 24px;
      border: 1px solid #e5e5e5;
      transition: 0.2s ease;
    }

    .metric-card:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
    }

    .metric-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .metric-number {
      font-size: 26px;
      font-weight: 700;
      color: #1c1c1c;
    }

    .metric-icon {
      font-size: 32px;
      opacity: 0.9;
    }

    .metric-title {
      margin-top: 8px;
      font-size: 15px;
      font-weight: 600;
      color: #445;
    }

    .metric-previous {
      margin-top: 4px;
      font-size: 13px;
      color: #999;
    }
    /* Dots stay same */
    .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      display: inline-block;
    }

    .dot-red {
      background-color: #ff4d4f;
    }
    .dot-yellow {
      background-color: #f6c23e;
    }
    .dot-green {
      background-color: #1cc88a;
    }
    .dot-gray {
      background-color: #6c757d;
    }
    .dot-blue {
      background-color: #4e73df;
    }
    .dot-purple {
      background-color: #9b51e0;
    }

    /* EXACT PLAIN GREY BAR LIKE YOUR 2ND IMAGE */
    .progress-custom {
      width: 180px;
      height: 8px;
      border-radius: 10px;
      background-color: #e5e7eb; /* light grey */
      overflow: hidden;
    }

    /* KILLS BOOTSTRAP ORANGE COMPLETELY */
    .bar-grey {
      background-color: #e5e7eb !important; /* SAME as container */
      width: 100% !important; /* FULL BAR ALWAYS */
      height: 100%;
      border-radius: 10px;
    }

    /* EXTRA SAFETY: remove Bootstrap fill effect */
    .progress-bar {
      background-image: none !important;
      box-shadow: none !important;
    }

    /* Force both cards to same height */
    .equal-height-card {
      min-height: 240px; /* adjust if needed */
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    /* Vertical spacing inside cards like reference */
    .equal-height-card .d-flex {
      margin-bottom: 16px;
    }

    .equal-height-card .d-flex:last-child {
      margin-bottom: 0;
    }
    .priority-breakdown-card {
      height: 320px;
      display: flex;
      flex-direction: column;
    }

    .chart-placeholder {
      flex: 1; /* takes full empty space */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .priority-legend {
      display: flex;
      justify-content: center;
      gap: 20px;
      font-size: 14px;
      margin-top: 10px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .legend-box {
      width: 14px;
      height: 10px;
      border-radius: 2px;
      display: inline-block;
    }

    .legend-box.red {
      background-color: #ff4d4f;
    }

    .legend-box.yellow {
      background-color: #f6c23e;
    }

    .legend-box.green {
      background-color: #1cc88a;
    }

    /* Widget dashboard */
    .widget-placeholder {
      background: #f8fafc;
      border: 2px dashed #d1d5db;
      border-radius: 14px;
      padding: 60px 20px;
    }

    .widget-box {
      text-align: center;
      color: #6b7280;
    }

    .widget-icon {
      font-size: 42px;
      color: #9ca3af;
    }
  </style>

  <body>
    <!-- Sidebar -->

    <div id="sidebar-container"></div>

    <!-- /Sidebar -->
    <div class="main-wrapper">
      <!-- Header -->
      <div class="header">
        <div class="main-header">
          <div class="header-left">
            <a href="index.html" class="logo"
              ><img src="../assets/img/logo.svg"
            /></a>
            <a href="index.html" class="dark-logo"
              ><img src="../assets/img/logo-white.svg"
            /></a>
          </div>

          <a id="mobile_btn" class="mobile_btn" href="#sidebar">
            <span class="bar-icon"
              ><span></span><span></span><span></span
            ></span>
          </a>

          <div class="header-user">
            <div class="nav user-menu nav-list">
              <div class="me-auto d-flex align-items-center" id="header-search">
                <a id="toggle_btn" href="#" class="btn btn-menubar me-1">
                  <i class="ti ti-arrow-bar-to-left"></i>
                </a>

                <div class="input-group input-group-flat me-1">
                  <span class="input-icon-addon"
                    ><i class="ti ti-search"></i
                  ></span>
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Search in HRMS"
                  />
                  <span class="input-group-text"><kbd>CTRL + /</kbd></span>
                </div>

                <a href="profile-settings.html" class="btn btn-menubar">
                  <i class="ti ti-settings-cog"></i>
                </a>
              </div>

              <div class="d-flex align-items-center">
                <a href="#" class="btn btn-menubar btnFullscreen"
                  ><i class="ti ti-maximize"></i
                ></a>
                <a href="chat.html" class="btn btn-menubar position-relative">
                  <i class="ti ti-brand-hipchat"></i>
                  <span class="badge bg-info rounded-pill header-badge">5</span>
                </a>
                <a href="email.html" class="btn btn-menubar"
                  ><i class="ti ti-mail"></i
                ></a>

                <div class="dropdown profile-dropdown">
                  <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown">
                    <span class="avatar avatar-sm online">
                      <img
                        src="../assets/img/profiles/avatar-12.jpg"
                        class="rounded-circle"
                      />
                    </span>
                  </a>
                  <div class="dropdown-menu shadow-none">
                    <a class="dropdown-item" href="profile.html">My Profile</a>
                    <a class="dropdown-item" href="profile-settings.html"
                      >Settings</a
                    >
                    <a class="dropdown-item" href="login.html">Logout</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- /Header -->

      <!-- Sidebar -->

      <div class="sidebar" id="sidebar">
        <div class="sidebar-logo">
          <a href="index.html" class="logo logo-normal">
            <img src="../assets/img/logo.svg" alt="Logo" />
          </a>
          <a href="index.html" class="logo-small">
            <img src="../assets/img/logo-small.svg" alt="Logo" />
          </a>
        </div>

        <div class="sidebar-inner slimscroll">
          <div id="sidebar-menu" class="sidebar-menu">
            <ul>
              <li class="menu-title">
                <span>MAIN</span>
              </li>

              <li>
                <a href="index.html">
                  <i class="ti ti-smart-home"></i>
                  <span>Dashboard</span>
                </a>
              </li>

              <li class="menu-title">
                <span>Property</span>
              </li>
              <li>
                <a href="property.html">
                  <i class="ti ti-building"></i>
                  <span>Property</span>
                </a>
              </li>
              <li>
                <a href="propertydetails.html">
                  <i class="ti ti-building-community"></i>
                  <span>Property Details</span>
                </a>
              </li>
              <li>
                <a href="bookings.html">
                  <i class="ti ti-calendar-event"></i>
                  <span>Bookings</span>
                </a>
              </li>

              <li class="menu-title">
                <span>CONTACTS</span>
              </li>
              <li>
                <a href="contacts.html">
                  <i class="ti ti-user"></i>
                  <span>Contacts</span>
                </a>
              </li>

              <li class="menu-title">
                <span>OPERATION HUB</span>
              </li>
              <li>
                <a href="maintenance.html">
                  <i class="ti ti-settings"></i>
                  <span>Maintenance</span>
                </a>
              </li>
              <li>
                <a href="compliance.html">
                  <i class="ti ti-user-check"></i>
                  <span>Compliance</span>
                </a>
              </li>
              <li>
                <a href="complaints.html">
                  <i class="ti ti-filter"></i>
                  <span>Complaints</span>
                </a>
              </li>
              <li>
                <a href="airetasks.html">
                  <i class="ti ti-device-analytics"></i>
                  <span>AIRE Tasks</span>
                </a>
              </li>
              <li>
                <a href="litigation.html">
                  <i class="ti ti-briefcase"></i>
                  <span>Litigation</span>
                </a>
              </li>
              <li>
                <a href="inspections.html">
                  <i class="ti ti-clipboard-check"></i>
                  <span>Inspections</span>
                </a>
              </li>
              <li class="submenu">
                <a href="javascript:void(0);" class="submenu-toggle">
                  <i class="ti ti-shield"></i>
                  <span>Safeguarding</span>
                  <span class="menu-arrow"></span>
                </a>

                <ul class="submenu-list">
                  <li>
                    <a href="safeguarding.html">
                      <i class="ti ti-user-plus"></i>
                      Referrals
                    </a>
                  </li>

                  <li>
                    <a href="risk-assessment.html">
                      <i class="ti ti-alert-circle"></i>
                      Risk Assessment
                    </a>
                  </li>

                  <li>
                    <a href="vulnerable-users.html">
                      <i class="ti ti-heart"></i>
                      Vulnerable Users
                    </a>
                  </li>

                  <li>
                    <a href="multi-agency.html">
                      <i class="ti ti-network"></i>
                      Multi-Agency
                    </a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="migranthelp.html">
                  <i class="ti ti-target"></i>
                  <span>Migrant Help</span>
                </a>
              </li>

              <li class="menu-title">
                <span>SU Data</span>
              </li>
              <li>
                <a href="suprofiles.html">
                  <i class="ti ti-user-circle"></i>
                  <span>SU Profiles</span>
                </a>
              </li>
              <li>
                <a href="analytics.html">
                  <i class="ti ti-chart-bar"></i>
                  <span>Analytics</span>
                </a>
              </li>
              <li>
                <a href="demographics.html">
                  <i class="ti ti-device-analytics"></i>
                  <span>Demographics</span>
                </a>
              </li>
              <li>
                <a href="accommodation.html">
                  <i class="ti ti-clock-hour-3"></i>
                  <span>Accommodation History</span>
                </a>
              </li>

              <li>
                <a href="move-in&out.html">
                  <i class="ti ti-home"></i>
                  <span>Move-In/Out</span>
                </a>
              </li>

              <li>
                <a href="meals.html">
                  <i class="ti ti-tools-kitchen-2"></i>
                  <span>Meals</span>
                </a>
              </li>
              <li>
                <a href="pparupload.html">
                  <i class="ti ti-upload"></i>
                  <span>PPAR Upload</span>
                </a>
              </li>

              <li>
                <a href="report.html">
                  <i class="ti ti-file"></i>
                  <span>Reports</span>
                </a>
              </li>

              <!-- <li>
                <a href="casedocumentation.html">
                  <i class="ti ti-file-description"></i>
                  <span>Case Documents</span>
                </a>
              </li> -->

              <li class="menu-title">
                <span>ESCALATIONS</span>
              </li>

              <li>
                <a href="incidents.html">
                  <i class="ti ti-alert-triangle"></i>
                  <span>Incidents</span>
                </a>
              </li>

              <li>
                <a href="complaintsfromincidents.html">
                  <i class="ti ti-flag"></i>
                  <span>Complaints</span>
                </a>
              </li>

              <li>
                <a href="vcsorganisations.html">
                  <i class="ti ti-briefcase"></i>
                  <span>VCS Organisations</span>
                </a>
              </li>

              <li>
                <a href="casemanagement.html">
                  <i class="ti ti-briefcase-2"></i>
                  <span>Case Management</span>
                </a>
              </li>

              <li>
                <a href="emergencyprotocols.html">
                  <i class="ti ti-first-aid-kit"></i>
                  <span>Emergency Protocols</span>
                </a>
              </li>

              <!-- ================= HSE ================= -->

              <li class="menu-title">
                <span>HSE</span>
              </li>

              <li>
                <a href="hseincidents.html">
                  <i class="ti ti-alert-triangle"></i>
                  <span>HSE Incidents</span>
                </a>
              </li>

              <li>
                <a href="riskmanagement.html">
                  <i class="ti ti-alert-circle"></i>
                  <span>Risk Management</span>
                </a>
              </li>

              <li>
                <a href="training.html">
                  <i class="ti ti-school"></i>
                  <span>Training</span>
                </a>
              </li>

              <li>
                <a href="audits.html">
                  <i class="ti ti-clipboard-check"></i>
                  <span>Audits</span>
                </a>
              </li>

              <!-- ================= FINANCE ================= -->

              <!-- ================= EMPLOYEES ================= -->

              <li class="menu-title">
                <span>EMPLOYEES</span>
              </li>

              <li>
                <a href="employees.html">
                  <i class="ti ti-users"></i>
                  <span>Employee List</span>
                </a>
              </li>

              <li>
                <a href="hrmanagement.html">
                  <i class="ti ti-id-badge"></i>
                  <span>HR Management</span>
                </a>
              </li>

              <li>
                <a href="performance.html">
                  <i class="ti ti-chart-bar"></i>
                  <span>Performance</span>
                </a>
              </li>

              <li>
                <a href="employeetraining.html">
                  <i class="ti ti-book"></i>
                  <span>Training</span>
                </a>
              </li>

              <li>
                <a href="payroll.html">
                  <i class="ti ti-wallet"></i>
                  <span>Payroll</span>
                </a>
              </li>

              <!-- modified -->

              <!-- <li class="menu-title">
                <span>PROJECTS</span>
              </li>
              <li>
                <a href="projects.html">
                  <i class="ti ti-box"></i>
                  <span>Projects</span>
                </a>
              </li>
              <li>
                <a href="tasks.html">
                  <i class="ti ti-list-check"></i>
                  <span>Tasks</span>
                </a>
              </li>
              <li>
                <a href="activities.html">
                  <i class="ti ti-activity"></i>
                  <span>Activities</span>
                </a>
              </li>

              <li class="menu-title">
                <span>REPORTS</span>
              </li>
              <li>
                <a href="employee-report.html">
                  <i class="ti ti-file-analytics"></i>
                  <span>Employee Report</span>
                </a>
              </li>
              <li>
                <a href="user-report.html">
                  <i class="ti ti-report"></i>
                  <span>User Report</span>
                </a>
              </li>
              <li>
                <a href="company-report.html">
                  <i class="ti ti-report-money"></i>
                  <span>Company Report</span>
                </a>
              </li>

              <li class="menu-title">
                <span>PROFILE</span>
              </li>
              <li>
                <a href="profile.html">
                  <i class="ti ti-user-circle"></i>
                  <span>My Profile</span>
                </a>
              </li>
              <li>
                <a href="profile-settings.html">
                  <i class="ti ti-settings"></i>
                  <span>Profile Settings</span>
                </a>
              </li>

              <li class="menu-title">
                <span>AUTH</span>
              </li>
              <li>
                <a href="login.html">
                  <i class="ti ti-login"></i>
                  <span>Login</span>
                </a>
              </li>
              <li>
                <a href="register.html">
                  <i class="ti ti-forms"></i>
                  <span>Register</span>
                </a>
              </li>
              <li>
                <a href="forgot-password.html">
                  <i class="ti ti-lock"></i>
                  <span>Forgot Password</span>
                </a>
              </li>
              <li>
                <a href="reset-password.html">
                  <i class="ti ti-key"></i>
                  <span>Reset Password</span>
                </a>
              </li>
              <li>
                <a href="two-step-verification.html">
                  <i class="ti ti-shield-check"></i>
                  <span>Two-Step Verification</span>
                </a>
              </li> -->

              <!-- modified -->
            </ul>
          </div>
        </div>
      </div>

      <!-- /Sidebar -->

      <!-- Page Content -->
      <div class="page-wrapper">
        <div class="content container-fluid">
          <!-- Page Header -->
          <!-- <div class="page-header">
            <h3 class="page-title">Operations Hub / Migrant Help</h3>
            <ul class="breadcrumb">
              <li class="breadcrumb-item">Operations Hub</li>
              <li class="breadcrumb-item active">Migrant Help</li>
            </ul>
          </div> -->

          <!-- Breadcrumb -->
          <div
            class="d-md-flex d-block align-items-center justify-content-between page-breadcrumb mb-3"
          >
            <div class="my-auto mb-2">
              <h2 class="page-title">Migrant Help</h2>
              <nav>
                <ol class="breadcrumb mb-0">
                  <li class="breadcrumb-item">
                    <a href="index.html"><i class="ti ti-smart-home"></i></a>
                  </li>
                  <li class="breadcrumb-item">Operations Hub</li>
                  <li class="breadcrumb-item active" aria-current="page">
                    Migrant Help
                  </li>
                </ol>
              </nav>
            </div>
            <div
              class="d-flex my-xl-auto right-content align-items-center flex-wrap"
            >
              <div class="me-2 mb-2">
                <a
                  href="#"
                  data-bs-toggle="modal"
                  data-bs-target="#taskModal"
                  class="btn btn-primary d-flex align-items-center"
                  ><i class="ti ti-plus me-2"></i>New Task</a
                >
              </div>
            </div>
          </div>
          <!-- /Breadcrumb -->

          <!-- Metrics -->

          <div class="row">
            <!-- Total Plans -->
            <div class="col-lg-3 col-md-6 d-flex">
              <div class="card flex-fill">
                <div
                  class="card-body d-flex align-items-center justify-content-between"
                >
                  <div class="d-flex align-items-center overflow-hidden">
                    <div>
                      <span class="avatar avatar-lg bg-success rounded-circle"
                        ><i class="ti ti-check"></i
                      ></span>
                    </div>
                    <div class="ms-2 overflow-hidden">
                      <p class="fs-12 fw-medium mb-1 text-truncate">
                        Total Support Cases
                      </p>
                      <h4>12</h4>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- /Total Plans -->

            <!-- Total Plans -->
            <div class="col-lg-3 col-md-6 d-flex">
              <div class="card flex-fill">
                <div
                  class="card-body d-flex align-items-center justify-content-between"
                >
                  <div class="d-flex align-items-center overflow-hidden">
                    <div>
                      <span class="avatar avatar-lg bg-danger rounded-circle"
                        ><i class="ti ti-alert-triangle"></i
                      ></span>
                    </div>
                    <div class="ms-2 overflow-hidden">
                      <p class="fs-12 fw-medium mb-1 text-truncate">
                        Urgent Needs
                      </p>
                      <h4>4</h4>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- /Total Plans -->

            <!-- Inactive Plans -->
            <div class="col-lg-3 col-md-6 d-flex">
              <div class="card flex-fill">
                <div
                  class="card-body d-flex align-items-center justify-content-between"
                >
                  <div class="d-flex align-items-center overflow-hidden">
                    <div>
                      <span class="avatar avatar-lg bg-warning rounded-circle"
                        ><i class="ti ti-home"></i
                      ></span>
                    </div>
                    <div class="ms-2 overflow-hidden">
                      <p class="fs-12 fw-medium mb-1 text-truncate">
                        Housing Support
                      </p>
                      <h4>3</h4>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- /Inactive Companies -->

            <!-- No of Plans  -->
            <div class="col-lg-3 col-md-6 d-flex">
              <div class="card flex-fill">
                <div
                  class="card-body d-flex align-items-center justify-content-between"
                >
                  <div class="d-flex align-items-center overflow-hidden">
                    <div>
                      <span class="avatar avatar-lg bg-success rounded-circle"
                        ><i class="ti ti-heart"></i
                      ></span>
                    </div>
                    <div class="ms-2 overflow-hidden">
                      <p class="fs-12 fw-medium mb-1 text-truncate">
                        Wellbeing Checks
                      </p>
                      <h4>5</h4>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- /No of Plans -->
          </div>

          <div class="card shadow-sm rounded-4 p-3">
            <!-- ✅ HEADER ROW -->
            <div
              class="d-flex align-items-center justify-content-between flex-wrap gap-3 border-bottom pb-3"
            >
              <div>
                <h5 class="mb-0 fw-semibold">All Work Orders</h5>
                <small class="text-muted">120 total records</small>
              </div>

              <div class="d-flex align-items-center gap-2 flex-wrap">
                <!-- Search -->
                <div class="position-relative">
                  <input
                    type="text"
                    class="form-control ps-5"
                    placeholder="Filter work orders..."
                    style="width: 260px"
                  />
                  <span
                    class="position-absolute top-50 start-0 translate-middle-y ps-3 text-muted"
                  >
                    <i class="ti ti-search"></i>
                  </span>
                </div>

                <!-- View -->
                <div class="dropdown">
                  <button
                    class="btn btn-white border d-flex align-items-center gap-2"
                    data-bs-toggle="dropdown"
                  >
                    <i class="ti ti-list"></i> View
                    <i class="ti ti-chevron-down"></i>
                  </button>
                  <ul class="dropdown-menu">
                    <li>
                      <button
                        class="dropdown-item active"
                        onclick="showTableView()"
                      >
                        Table View
                      </button>
                    </li>

                    <li>
                      <button class="dropdown-item" onclick="showDashboard()">
                        Dashboard View
                      </button>
                    </li>

                    <li>
                      <button class="dropdown-item" onclick="showBoardView()">
                        Board View
                      </button>
                    </li>
                  </ul>
                </div>

                <!-- Filter -->
                <button
                  class="btn btn-white border d-flex align-items-center gap-2"
                >
                  <i class="ti ti-filter"></i> Filter
                </button>

                <!-- Columns -->
                <div class="dropdown">
                  <button
                    class="btn btn-white border d-flex align-items-center gap-2"
                    data-bs-toggle="dropdown"
                  >
                    <i class="ti ti-columns"></i> Columns
                  </button>
                  <ul class="dropdown-menu dropdown-menu-end p-3">
                    <li class="dropdown-item">Type</li>
                    <li class="dropdown-item">Reference</li>
                    <li class="dropdown-item">Description</li>
                    <li class="dropdown-item">Priority</li>
                    <li class="dropdown-item">Status</li>
                    <li class="dropdown-item">Assigned To</li>
                    <li class="dropdown-item">Date</li>
                  </ul>
                </div>

                <!-- Create Button -->
                <a
                  href="#"
                  data-bs-toggle="modal"
                  data-bs-target="#taskModal"
                  class="btn btn-primary d-flex align-items-center gap-2"
                >
                  <i class="ti ti-upload"></i> Create Task
                </a>
              </div>
            </div>

            <!-- ✅ SECOND FILTER ROW -->
            <div class="d-flex gap-2 flex-wrap py-3 border-bottom">
              <!--  ALL Priority -->
              <div class="dropdown">
                <button
                  class="btn btn-light border dropdown-toggle"
                  type="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  All Priority
                </button>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#">All Priority</a></li>
                  <li><a class="dropdown-item" href="#">Low</a></li>
                  <li><a class="dropdown-item" href="#">Medium</a></li>
                  <li><a class="dropdown-item" href="#">High</a></li>
                  <li><a class="dropdown-item" href="#">Urgent</a></li>
                </ul>
              </div>
              <!--  ALL Status -->
              <div class="dropdown">
                <button
                  class="btn btn-light border dropdown-toggle"
                  type="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  All Status
                </button>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#">All Status</a></li>
                  <li><a class="dropdown-item" href="#">Open</a></li>
                  <li><a class="dropdown-item" href="#">Pending</a></li>
                  <li><a class="dropdown-item" href="#">Completed</a></li>
                </ul>
              </div>
              <!--  ALL PROPERTIES -->
              <div class="dropdown">
                <button
                  class="btn btn-light border dropdown-toggle"
                  type="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  All Properties
                </button>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#">All Properties</a></li>
                  <li><a class="dropdown-item" href="#">Garden House</a></li>
                  <li><a class="dropdown-item" href="#">Crown Lodge</a></li>
                  <li><a class="dropdown-item" href="#">Trident Elite</a></li>
                </ul>
              </div>
            </div>

            <!-- ✅ TABLE (NOW INSIDE SAME CARD) -->
            <div id="tableView" class="table-responsive mt-3">
              <table class="table mb-0">
                <thead>
                  <tr>
                    <!-- ✅ CHECKBOX (NO SORT) -->
                    <th>
                      <input class="form-check-input" type="checkbox" />
                    </th>

                    <!-- ✅ TYPE -->
                    <th
                      class="header-th"
                      data-col="1"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-tag me-1"></i>
                        <span>Type</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ REFERENCE -->
                    <th
                      class="header-th"
                      data-col="2"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-file-text me-1"></i>
                        <span>Reference</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ DESCRIPTION -->
                    <th
                      class="header-th"
                      data-col="3"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-file-description me-1"></i>
                        <span>Description</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ PRIORITY -->
                    <th
                      class="header-th"
                      data-col="4"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-alert-circle me-1"></i>
                        <span>Priority</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ STATUS -->
                    <th
                      class="header-th"
                      data-col="5"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-activity me-1"></i>
                        <span>Status</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ ASSIGNED TO -->
                    <th
                      class="header-th"
                      data-col="6"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-user me-1"></i>
                        <span>Assigned To</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ DATE -->
                    <th
                      class="header-th"
                      data-col="7"
                      style="position: relative"
                    >
                      <div class="d-flex align-items-center gap-1 th-label">
                        <i class="ti ti-calendar me-1"></i>
                        <span>Date</span>
                        <i class="ti ti-chevron-down header-arrow"></i>
                        <button
                          class="category-menu-btn"
                          type="button"
                          onclick="toggleGenericMenu(event,this)"
                        >
                          <i class="ti ti-dots"></i>
                        </button>
                      </div>

                      <div class="category-dropdown d-none">
                        <div
                          class="dropdown-item"
                          onclick="toggleGenericSort(this)"
                        >
                          <i class="ti ti-arrows-sort"></i>
                          <span class="sort-label">Sort A → Z</span>
                        </div>
                        <div
                          class="dropdown-item d-flex justify-content-between"
                        >
                          <span><i class="ti ti-filter"></i> Filter</span>
                          <i class="ti ti-chevron-right"></i>
                        </div>
                        <div
                          class="dropdown-item text-danger"
                          onclick="hideGenericColumn(this)"
                        >
                          <i class="ti ti-eye-off"></i> Hide
                        </div>
                      </div>
                    </th>

                    <!-- ✅ ACTIONS (UNCHANGED AS PER YOUR REQUIREMENT) -->
                    <th><i class="ti ti-dots me-1"></i> Actions</th>
                  </tr>
                </thead>

                <tbody>
                  <!-- ✅ EXISTING ROWS (UNCHANGED STRUCTURE) -->
                  <tr>
                    <td><input class="form-check-input" type="checkbox" /></td>
                    <td>
                      <span
                        class="badge rounded-pill border text-warning bg-light"
                      >
                        Migrant Help
                      </span>
                    </td>

                    <td>
                      <strong>MGH-2025-</strong><br />
                      <small class="text-muted">e5198a6e</small>
                    </td>

                    <td>
                      <strong>Emergency Food Support</strong><br />
                      <small class="text-muted">
                        Migrant Help work required as per inspection report.
                      </small>
                    </td>

                    <td><span class="text-warning">● Medium</span></td>
                    <td><span class="text-success">● Completed</span></td>

                    <td class="d-flex align-items-center gap-2">
                      <span class="avatar bg-warning text-white">AM</span>
                      <span>ABC Maintenance</span>
                    </td>

                    <td>Feb 8, 2025</td>

                    <td>
                      <i class="ti ti-edit me-2"></i>
                      <i class="ti ti-trash"></i>
                    </td>
                  </tr>

                  <tr>
                    <td><input class="form-check-input" type="checkbox" /></td>
                    <td>
                      <span
                        class="badge rounded-pill border text-warning bg-light"
                      >
                        Migrant Help
                      </span>
                    </td>

                    <td>
                      <strong>MGH-2025-</strong><br />
                      <small>c51690eb</small>
                    </td>

                    <td>
                      <strong>Heating Issue - Temporary Housing</strong><br />
                      <small class="text-muted">
                        Migrant Help work required as per inspection report.
                      </small>
                    </td>

                    <td><span class="text-warning">● Medium</span></td>
                    <td><span class="text-warning">● Pending</span></td>

                    <td class="text-muted">Unassigned</td>
                    <td>Sep 26, 2025</td>

                    <td>
                      <i class="ti ti-edit me-2"></i>
                      <i class="ti ti-trash"></i>
                    </td>
                  </tr>

                  <tr>
                    <td><input class="form-check-input" type="checkbox" /></td>
                    <td>
                      <span
                        class="badge rounded-pill border text-warning bg-light"
                      >
                        Migrant Help
                      </span>
                    </td>

                    <td>
                      <strong>MGH-2025-</strong><br />
                      <small>cda9bd4e</small>
                    </td>

                    <td>
                      <strong>Routine Wellbeing Check</strong><br />
                      <small class="text-muted">
                        Migrant Help work required as per inspection report.
                      </small>
                    </td>

                    <td><span class="text-success">● Low</span></td>
                    <td><span class="text-success">● Completed</span></td>

                    <td class="d-flex align-items-center gap-2">
                      <span class="avatar bg-info text-white">IT</span>
                      <span>In-house Team</span>
                    </td>

                    <td>Jun 2, 2025</td>

                    <td>
                      <i class="ti ti-edit me-2"></i>
                      <i class="ti ti-trash"></i>
                    </td>
                  </tr>

                  <!-- ✅ NEW ROWS ADDED -->

                  <tr>
                    <td><input class="form-check-input" type="checkbox" /></td>
                    <td>
                      <span
                        class="badge rounded-pill border text-warning bg-light"
                      >
                        Migrant Help
                      </span>
                    </td>

                    <td>
                      <strong>MGH-2025-</strong><br />
                      <small>2b9c6ef8</small>
                    </td>

                    <td>
                      <strong>Urgent Transport Assistance</strong><br />
                      <small class="text-muted">
                        Migrant Help work required as per inspection report.
                      </small>
                    </td>

                    <td><span class="text-danger">● Urgent</span></td>
                    <td><span class="text-success">● Completed</span></td>

                    <td class="d-flex align-items-center gap-2">
                      <span class="avatar bg-primary text-white">QF</span>
                      <span>Quick Fix Services</span>
                    </td>

                    <td>Mar 17, 2025</td>

                    <td>
                      <i class="ti ti-edit me-2"></i>
                      <i class="ti ti-trash"></i>
                    </td>
                  </tr>

                  <tr>
                    <td><input class="form-check-input" type="checkbox" /></td>
                    <td>
                      <span
                        class="badge rounded-pill border text-warning bg-light"
                      >
                        Migrant Help
                      </span>
                    </td>

                    <td>
                      <strong>MGH-2025-</strong><br />
                      <small>f3c0c417</small>
                    </td>

                    <td>
                      <strong>Clothing Support Request</strong><br />
                      <small class="text-muted">
                        Migrant Help work required as per inspection report.
                      </small>
                    </td>

                    <td><span class="text-success">● Low</span></td>
                    <td><span class="text-warning">● Pending</span></td>

                    <td class="text-muted">Unassigned</td>
                    <td>Dec 19, 2024</td>

                    <td>
                      <i class="ti ti-edit me-2"></i>
                      <i class="ti ti-trash"></i>
                    </td>
                  </tr>

                  <tr>
                    <td><input class="form-check-input" type="checkbox" /></td>
                    <td>
                      <span
                        class="badge rounded-pill border text-warning bg-light"
                      >
                        Migrant Help
                      </span>
                    </td>

                    <td>
                      <strong>MGH-2025-</strong><br />
                      <small>ca81318f</small>
                    </td>

                    <td>
                      <strong>Housing Query Follow-Up</strong><br />
                      <small class="text-muted">
                        Migrant Help work required as per inspection report.
                      </small>
                    </td>

                    <td><span class="text-warning">● Medium</span></td>
                    <td><span class="text-success">● Completed</span></td>

                    <td class="d-flex align-items-center gap-2">
                      <span class="avatar bg-primary text-white">QF</span>
                      <span>Quick Fix Services</span>
                    </td>

                    <td>Oct 24, 2024</td>

                    <td>
                      <i class="ti ti-edit me-2"></i>
                      <i class="ti ti-trash"></i>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- Table -->

            <div id="boardView" style="display: none; margin-top: 6px">
              <div class="row g-4">
                <!-- OPEN -->
                <div class="col-md-3">
                  <!-- HEADER ONLY (colored) -->
                  <div class="kanban-header-box" style="background: #f6f7f9">
                    <span>Open</span>
                    <span class="kanban-count">1</span>
                  </div>

                  <!-- WHITE CARDS AREA -->
                  <div class="kanban-column">
                    <div class="kanban-card-container">
                      <div class="d-flex justify-content-between">
                        <h6 class="fw-semibold">Fire Safety Equipment</h6>
                        <div>
                          <i class="ti ti-edit me-2"></i>
                          <i class="ti ti-trash"></i>
                        </div>
                      </div>

                      <span class="cat-pill cat2">CAT2</span>

                      <p class="small">
                        <i class="ti ti-calendar-event me-1"></i> Sep 30
                      </p>

                      <p class="small"><strong>Site:</strong> Parmiter</p>
                      <p class="small"><strong>Room:</strong> Room 100</p>
                      <p class="small mb-0">
                        <strong>Raised By:</strong> Safety Officer
                      </p>
                    </div>
                  </div>
                </div>

                <!-- IN PROGRESS -->
                <div class="col-md-3">
                  <!-- HEADER (colored only) -->
                  <div class="kanban-header-box" style="background: #e6f0ff">
                    <span>In Progress</span>
                    <span class="kanban-count">0</span>
                  </div>

                  <!-- WHITE CONTENT AREA -->
                  <div class="kanban-column">
                    <p class="text-center text-muted mt-5">No tasks</p>
                  </div>
                </div>

                <!-- UNDER REVIEW -->
                <div class="col-md-3">
                  <!-- HEADER (colored only) -->
                  <div class="kanban-header-box" style="background: #f3eaff">
                    <span>Under Review</span>
                    <span class="kanban-count">1</span>
                  </div>

                  <!-- WHITE CONTENT AREA -->
                  <div class="kanban-column">
                    <div class="kanban-card-container shadow-sm mb-3">
                      <div class="d-flex justify-content-between">
                        <h6 class="fw-semibold">Electrical Safety Audit</h6>
                        <div>
                          <i class="ti ti-edit me-2"></i>
                          <i class="ti ti-trash"></i>
                        </div>
                      </div>

                      <span class="cat-pill cat1">CAT1</span>

                      <p class="small">
                        <i class="ti ti-calendar-event me-1"></i> Mar 12
                      </p>

                      <p class="small"><strong>Site:</strong> Building C</p>
                      <p class="small"><strong>Room:</strong> Main Panel</p>
                      <p class="small mb-0">
                        <strong>Raised By:</strong> Maintenance Team
                      </p>
                    </div>
                  </div>
                </div>

                <!-- COMPLETED -->
                <div class="col-md-3">
                  <!-- HEADER (colored only) -->
                  <div class="kanban-header-box" style="background: #e7ffe9">
                    <span>Completed</span>
                    <span class="kanban-count">1</span>
                  </div>

                  <!-- WHITE CARD AREA -->
                  <div class="kanban-column">
                    <div class="kanban-card-container shadow-sm mb-3">
                      <div class="d-flex justify-content-between">
                        <h6 class="fw-semibold">Generator Testing</h6>
                        <div>
                          <i class="ti ti-edit me-2"></i>
                          <i class="ti ti-trash"></i>
                        </div>
                      </div>

                      <span class="cat-pill cat3">CAT3</span>

                      <p class="small">
                        <i class="ti ti-calendar-event me-1"></i> Mar 10
                      </p>

                      <p class="small"><strong>Site:</strong> Building D</p>
                      <p class="small"><strong>Room:</strong> Generator Room</p>
                      <p class="small mb-0">
                        <strong>Raised By:</strong> Scheduled Maintenance
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- DASHBOARD -->
            <div id="dashboardView" style="display: none; margin-top: 6px">
              <div class="card mb-3">
                <div
                  class="card-body d-flex justify-content-between align-items-center"
                >
                  <div>
                    <strong>Compare Period:</strong>
                    <select class="form-select d-inline-block w-auto ms-2">
                      <option>Month-over-Month</option>
                      <option>Year-over-Year</option>
                    </select>

                    <button class="btn btn-light ms-2">
                      Nov 2025 vs Oct 2025
                    </button>
                  </div>
                </div>
              </div>

              <!-- METRICS ROW -->

              <!-- DASHBOARD METRICS -->
              <div class="row g-4 mb-4">
                <!-- Total Tasks -->
                <div class="col-md-3">
                  <div class="metric-card">
                    <div class="metric-top">
                      <span class="metric-number">6</span>
                      <i class="ti ti-chart-bar metric-icon text-info"></i>
                    </div>
                    <div class="metric-title">Total Tasks</div>
                    <div class="metric-previous">4 Previous</div>
                  </div>
                </div>

                <!-- Completed -->
                <div class="col-md-3">
                  <div class="metric-card">
                    <div class="metric-top">
                      <span class="metric-number">1</span>
                      <i
                        class="ti ti-circle-check metric-icon text-success"
                      ></i>
                    </div>
                    <div class="metric-title">Completed</div>
                    <div class="metric-previous">0 Previous</div>
                  </div>
                </div>

                <!-- In Progress -->
                <div class="col-md-3">
                  <div class="metric-card">
                    <div class="metric-top">
                      <span class="metric-number">1</span>
                      <i
                        class="ti ti-trending-up metric-icon"
                        style="color: #ff8b47"
                      ></i>
                    </div>
                    <div class="metric-title">In Progress</div>
                    <div class="metric-previous">0 Previous</div>
                  </div>
                </div>

                <!-- Overdue -->
                <div class="col-md-3">
                  <div class="metric-card">
                    <div class="metric-top">
                      <span class="metric-number">3</span>
                      <i class="ti ti-alert-circle metric-icon text-danger"></i>
                    </div>
                    <div class="metric-title">Overdue</div>
                    <div class="metric-previous">0 Previous</div>
                  </div>
                </div>
              </div>

              <!-- CHART ROW -->
              <div class="row g-3 mt-3">
                <div class="col-md-6">
                  <div class="card p-4 equal-height-card">
                    <h6 class="mb-4">Priority Distribution</h6>

                    <!-- CAT1 -->
                    <div class="d-flex align-items-center mb-3">
                      <span class="dot dot-red me-2"></span>
                      <span class="me-auto">CAT1</span>

                      <div class="progress progress-custom me-3">
                        <div id="bar-cat1" class="progress-bar bar-grey"></div>
                      </div>

                      <span id="count-cat1" class="fw-bold">0</span>
                      <small id="percent-cat1" class="text-muted ms-2"
                        >(0.0%)</small
                      >
                    </div>

                    <!-- CAT2 -->
                    <div class="d-flex align-items-center mb-3">
                      <span class="dot dot-yellow me-2"></span>
                      <span class="me-auto">CAT2</span>

                      <div class="progress progress-custom me-3">
                        <div id="bar-cat2" class="progress-bar bar-grey"></div>
                      </div>

                      <span id="count-cat2" class="fw-bold">0</span>
                      <small id="percent-cat2" class="text-muted ms-2"
                        >(0.0%)</small
                      >
                    </div>

                    <!-- CAT3 -->
                    <div class="d-flex align-items-center">
                      <span class="dot dot-green me-2"></span>
                      <span class="me-auto">CAT3</span>

                      <div class="progress progress-custom me-3">
                        <div id="bar-cat3" class="progress-bar bar-grey"></div>
                      </div>

                      <span id="count-cat3" class="fw-bold">0</span>
                      <small id="percent-cat3" class="text-muted ms-2"
                        >(0.0%)</small
                      >
                    </div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="card p-4 equal-height-card">
                    <h6 class="mb-4">Status Distribution</h6>

                    <!-- Open -->
                    <div class="d-flex align-items-center mb-3">
                      <span class="dot dot-gray me-2"></span>
                      <span class="me-auto">Open</span>

                      <div class="progress progress-custom me-3">
                        <div id="bar-open" class="progress-bar bar-grey"></div>
                      </div>

                      <span id="count-open" class="fw-bold">0</span>
                      <small id="percent-open" class="text-muted ms-2"
                        >(0.0%)</small
                      >
                    </div>

                    <!-- In Progress -->
                    <div class="d-flex align-items-center mb-3">
                      <span class="dot dot-blue me-2"></span>
                      <span class="me-auto">In Progress</span>

                      <div class="progress progress-custom me-3">
                        <div
                          id="bar-progress"
                          class="progress-bar bar-grey"
                        ></div>
                      </div>

                      <span id="count-progress" class="fw-bold">0</span>
                      <small id="percent-progress" class="text-muted ms-2"
                        >(0.0%)</small
                      >
                    </div>

                    <!-- Under Review -->
                    <div class="d-flex align-items-center mb-3">
                      <span class="dot dot-purple me-2"></span>
                      <span class="me-auto">Under Review</span>

                      <div class="progress progress-custom me-3">
                        <div
                          id="bar-review"
                          class="progress-bar bar-grey"
                        ></div>
                      </div>

                      <span id="count-review" class="fw-bold">0</span>
                      <small id="percent-review" class="text-muted ms-2"
                        >(0.0%)</small
                      >
                    </div>

                    <!-- Completed -->
                    <div class="d-flex align-items-center">
                      <span class="dot dot-green me-2"></span>
                      <span class="me-auto">Completed</span>

                      <div class="progress progress-custom me-3">
                        <div
                          id="bar-complete"
                          class="progress-bar bar-grey"
                        ></div>
                      </div>

                      <span id="count-complete" class="fw-bold">0</span>
                      <small id="percent-complete" class="text-muted ms-2"
                        >(0.0%)</small
                      >
                    </div>
                  </div>
                </div>
              </div>

              <!-- BOTTOM CHARTS -->
              <div class="row g-3 mt-3">
                <div class="col-md-6">
                  <div class="card p-3" style="height: 320px">
                    <h6 class="mb-3">Defects Summary</h6>

                    <div class="chart-wrapper" style="height: 240px">
                      <canvas id="defectsChart"></canvas>
                    </div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="card p-4 priority-breakdown-card">
                    <h6 class="mb-0">Priority Breakdown</h6>

                    <!-- Empty Chart Area -->
                    <div class="chart-placeholder">
                      <!-- (Intentionally empty like your reference image) -->
                    </div>

                    <!-- Legend at Bottom -->
                    <div class="priority-legend">
                      <span class="legend-item">
                        <span class="legend-box red"></span> CAT1
                      </span>
                      <span class="legend-item">
                        <span class="legend-box yellow"></span> CAT2
                      </span>
                      <span class="legend-item">
                        <span class="legend-box green"></span> CAT3
                      </span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="card p-3 mt-3">
                <h6>Top Raised Defects</h6>
                <p class="text-center text-muted mt-4">
                  No defects data available
                </p>
              </div>
            </div>
          </div>

          <!-- /Task Modal -->
          <div class="modal fade" id="taskModal" tabindex="-1">
            <div
              class="modal-dialog modal-dialog-centered modal-md modal-dialog-scrollable"
            >
              <div class="modal-content">
                <!-- ✅ HEADER -->
                <div class="modal-header">
                  <div>
                    <h4 class="modal-title">Migrant Help Task</h4>
                    <p class="text-muted mb-0">
                      Standard form for reporting tasks
                    </p>
                  </div>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                  ></button>
                </div>

                <!-- ✅ BODY -->
                <div class="modal-body">
                  <!-- Title -->
                  <div class="mb-3">
                    <label class="form-label"
                      >Title <span class="text-danger">*</span></label
                    >
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Brief description of task"
                    />
                  </div>

                  <!-- Description -->
                  <div class="mb-3">
                    <label class="form-label"
                      >Description <span class="text-danger">*</span></label
                    >
                    <textarea
                      class="form-control"
                      rows="3"
                      placeholder="Detailed description of the maintenance issue..."
                    ></textarea>
                  </div>

                  <!-- Property & Category -->
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label class="form-label"
                        >Property <span class="text-danger">*</span></label
                      >
                      <select class="form-select">
                        <option selected disabled>Select property</option>
                        <option>Garden House Hotel</option>
                        <option>Crown Lodge Hotel</option>
                        <option>Trident Elite</option>
                        <option>Marriott Waterfront</option>
                      </select>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label class="form-label"
                        >Category <span class="text-danger">*</span></label
                      >
                      <select class="form-select">
                        <option selected disabled>Select category</option>
                        <option>Plumbing</option>
                        <option>Electrical</option>
                        <option>HVAC</option>
                        <option>Structural</option>
                        <option>Appliances</option>
                        <option>Doors & Windows</option>
                        <option>Flooring</option>
                        <option>Roofing</option>
                        <option>Pest Control</option>
                        <option>Other</option>
                      </select>
                    </div>
                  </div>

                  <!-- Priority & Reported By -->
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label class="form-label"
                        >Priority <span class="text-danger">*</span></label
                      >
                      <select class="form-select">
                        <option>low</option>
                        <option selected>medium</option>
                        <option>high</option>
                        <option>emergency</option>
                      </select>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label class="form-label"
                        >Reported By <span class="text-danger">*</span></label
                      >
                      <input
                        type="text"
                        class="form-control"
                        placeholder="Name of person reporting"
                      />
                    </div>
                  </div>

                  <!-- Assigned To & Scheduled Date -->
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label class="form-label">Assigned To</label>
                      <input
                        type="text"
                        class="form-control"
                        placeholder="Name of assignee"
                      />
                    </div>

                    <div class="col-md-6 mb-3">
                      <label class="form-label">Scheduled Date</label>
                      <div class="input-group">
                        <input type="date" class="form-control" />
                        <span class="input-group-text">
                          <i class="ti ti-calendar"></i>
                        </span>
                      </div>
                    </div>
                  </div>

                  <!-- Estimated Cost -->
                  <!-- <div class="mb-3">
                    <label class="form-label">Estimated Cost</label>
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Estimated cost in £"
                    />
                  </div> -->
                </div>

                <!-- ✅ FOOTER -->
                <div class="modal-footer d-flex justify-content-end gap-2">
                  <button
                    type="button"
                    class="btn btn-outline-secondary"
                    data-bs-dismiss="modal"
                  >
                    Cancel
                  </button>
                  <button type="button" class="btn btn-primary">
                    Submit Form
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- /Page Wrapper -->
    </div>

    <!-- JS Files -->
    <script>
      fetch("../assets/includes/sidebar.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("sidebar-container").innerHTML = data;
        });
    </script>

    <script>
      // Sidebar toggle (collapse / expand)
      $(document).on("click", "#toggle_btn", function () {
        $("body").toggleClass("mini-sidebar");

        if (!$("body").hasClass("mini-sidebar")) {
          $(".subdrop + ul").slideDown();
        } else {
          $(".subdrop + ul").slideUp();
        }

        return false;
      });
    </script>

    <script>
      function toggleGenericMenu(event, btn) {
        event.stopPropagation();

        const dropdown = btn.closest("th").querySelector(".category-dropdown");
        const isOpen = !dropdown.classList.contains("d-none");

        // Close all first
        document.querySelectorAll(".category-dropdown").forEach((menu) => {
          menu.classList.add("d-none");
        });

        // Toggle only this one
        if (!isOpen) {
          dropdown.classList.remove("d-none");
        }
      }

      /* Close all dropdowns on outside click */
      document.addEventListener("click", function () {
        document.querySelectorAll(".category-dropdown").forEach((menu) => {
          menu.classList.add("d-none");
        });
      });

      /* Prevent dropdown click from closing itself */
      document.querySelectorAll(".category-dropdown").forEach((dd) => {
        dd.addEventListener("click", function (e) {
          e.stopPropagation();
        });
      });
    </script>

    <script>
      let genericSortState = {}; // keeps state per column

      function toggleGenericSort(el) {
        const th = el.closest("th");
        const colIndex = Number(th.dataset.col);
        if (Number.isNaN(colIndex)) return;

        const table = document.querySelector("table");
        const tbody = table.querySelector("tbody");
        const rows = Array.from(tbody.querySelectorAll("tr"));

        // ✅ init only once
        if (!(colIndex in genericSortState)) {
          genericSortState[colIndex] = true; // first time: A → Z
        }
        const isAZ = genericSortState[colIndex];

        rows.sort((a, b) => {
          let A = a.children[colIndex].innerText.trim();
          let B = b.children[colIndex].innerText.trim();

          // Try date sort first
          if (!isNaN(Date.parse(A)) && !isNaN(Date.parse(B))) {
            return isAZ ? new Date(A) - new Date(B) : new Date(B) - new Date(A);
          }

          A = A.toUpperCase();
          B = B.toUpperCase();
          return isAZ ? A.localeCompare(B) : B.localeCompare(A);
        });

        rows.forEach((row) => tbody.appendChild(row));

        // Update label text
        const label = el.querySelector(".sort-label");
        if (label) {
          label.innerText = isAZ ? "Sort Z → A" : "Sort A → Z";
        }

        // ✅ flip state for next click
        genericSortState[colIndex] = !isAZ;

        const dropdown = th.querySelector(".category-dropdown");
        if (dropdown) dropdown.classList.add("d-none");
      }
    </script>

    <script>
      function hideGenericColumn(el) {
        const th = el.closest("th");
        const colIndex = parseInt(th.dataset.col);
        const table = document.querySelector("table");

        // Hide header
        th.style.display = "none";

        // Hide column cells
        table.querySelectorAll("tbody tr").forEach((row) => {
          row.children[colIndex].style.display = "none";
        });
      }
    </script>

    <script>
      let isCategorySortedAZ = true; // default state

      function toggleCategorySort() {
        const table = document.querySelector("table");
        const tbody = table.querySelector("tbody");
        const rows = Array.from(tbody.querySelectorAll("tr"));

        rows.sort((a, b) => {
          const catA = a.children[2].innerText.trim().toUpperCase(); // Category column
          const catB = b.children[2].innerText.trim().toUpperCase();

          return isCategorySortedAZ
            ? catA.localeCompare(catB) // A → Z
            : catB.localeCompare(catA); // Z → A
        });

        // Re-append rows
        rows.forEach((row) => tbody.appendChild(row));

        // Toggle label text
        const label = document.getElementById("sortLabel");
        label.innerText = isCategorySortedAZ ? "Sort Z → A" : "Sort A → Z";

        // Flip state
        isCategorySortedAZ = !isCategorySortedAZ;

        // Close dropdown
        document.getElementById("categoryDropdown").classList.add("d-none");
      }
    </script>
    <script>
      function toggleCategoryMenu(event) {
        event.stopPropagation();
        const dropdown = document.getElementById("categoryDropdown");
        dropdown.classList.toggle("d-none");
      }

      // Close menu when clicking outside
      document.addEventListener("click", function () {
        const dd = document.getElementById("categoryDropdown");
        if (dd && !dd.classList.contains("d-none")) {
          dd.classList.add("d-none");
        }
      });
    </script>

    <script>
      // Show current time live
      setInterval(() => {
        document.getElementById("current-time").innerHTML =
          new Date().toLocaleTimeString();
      }, 1000);
    </script>
    <script>
      $(document).ready(function () {
        $("#toggle_btn").on("click", function () {
          if ($("body").hasClass("mini-sidebar")) {
            $("body").removeClass("mini-sidebar");
            $(".sidebar").css("width", "260px");
          } else {
            $("body").addClass("mini-sidebar");
            $(".sidebar").css("width", "60px");
          }
        });
      });
    </script>
    <script>
      document
        .getElementById("mobile_btn")
        .addEventListener("click", function () {
          document.body.classList.toggle("mini-sidebar");
        });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const rows = document.querySelectorAll("tbody tr");

        let cat1 = 0,
          cat2 = 0,
          cat3 = 0;

        rows.forEach((row) => {
          const category = row.children[2].innerText.trim(); // Category column index = 2

          if (category === "CAT1") cat1++;
          if (category === "CAT2") cat2++;
          if (category === "CAT3") cat3++;
        });

        const total = cat1 + cat2 + cat3;

        const percent1 = total ? ((cat1 / total) * 100).toFixed(1) : 0;
        const percent2 = total ? ((cat2 / total) * 100).toFixed(1) : 0;
        const percent3 = total ? ((cat3 / total) * 100).toFixed(1) : 0;

        // Update numbers
        document.getElementById("count-cat1").innerText = cat1;
        document.getElementById("count-cat2").innerText = cat2;
        document.getElementById("count-cat3").innerText = cat3;

        document.getElementById("percent-cat1").innerText = `(${percent1}%)`;
        document.getElementById("percent-cat2").innerText = `(${percent2}%)`;
        document.getElementById("percent-cat3").innerText = `(${percent3}%)`;

        // Update bars
        document.getElementById("bar-cat1").style.width = percent1 + "%";
        document.getElementById("bar-cat2").style.width = percent2 + "%";
        document.getElementById("bar-cat3").style.width = percent3 + "%";
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const rows = document.querySelectorAll("tbody tr");

        let open = 0,
          progress = 0,
          review = 0,
          complete = 0;

        rows.forEach((row) => {
          const status = row.children[6].innerText.trim(); // Status column

          if (status === "Open") open++;
          if (status === "In Progress") progress++;
          if (status === "Under Review") review++;
          if (status === "Completed") complete++;
        });

        const total = open + progress + review + complete;

        const pOpen = total ? ((open / total) * 100).toFixed(1) : 0;
        const pProgress = total ? ((progress / total) * 100).toFixed(1) : 0;
        const pReview = total ? ((review / total) * 100).toFixed(1) : 0;
        const pComplete = total ? ((complete / total) * 100).toFixed(1) : 0;

        // Numbers
        document.getElementById("count-open").innerText = open;
        document.getElementById("count-progress").innerText = progress;
        document.getElementById("count-review").innerText = review;
        document.getElementById("count-complete").innerText = complete;

        // Percentages
        document.getElementById("percent-open").innerText = `(${pOpen}%)`;
        document.getElementById(
          "percent-progress"
        ).innerText = `(${pProgress}%)`;
        document.getElementById("percent-review").innerText = `(${pReview}%)`;
        document.getElementById(
          "percent-complete"
        ).innerText = `(${pComplete}%)`;

        // Bars
        document.getElementById("bar-open").style.width = pOpen + "%";
        document.getElementById("bar-progress").style.width = pProgress + "%";
        document.getElementById("bar-review").style.width = pReview + "%";
        document.getElementById("bar-complete").style.width = pComplete + "%";
      });
    </script>

    <script>
      function showTableView() {
        document.getElementById("tableView").style.display = "block";
        document.getElementById("dashboardView").style.display = "none";
        document.getElementById("boardView").style.display = "none";

        updateDropdownActive("Table View");
      }

      function showDashboard() {
        document.getElementById("tableView").style.display = "none";
        document.getElementById("dashboardView").style.display = "block";
        document.getElementById("boardView").style.display = "none";

        updateDropdownActive("Dashboard View");
      }

      function showBoardView() {
        document.getElementById("tableView").style.display = "none";
        document.getElementById("dashboardView").style.display = "none";
        document.getElementById("boardView").style.display = "block";

        updateDropdownActive("Board View");
      }

      function updateDropdownActive(label) {
        let items = document.querySelectorAll(".dropdown-menu .dropdown-item");
        items.forEach((item) => {
          item.classList.remove("active");
          if (item.innerText.trim() === label) {
            item.classList.add("active");
          }
        });
      }
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const ctx = document.getElementById("defectsChart").getContext("2d");

        const labels = [
          "Total No of Defects",
          "Pending Defects",
          "Total Over Due Defects",
        ];

        const currentData = [4, 3, 2]; // example values
        const previousData = [0, 0, 0]; // always zero as shown in image

        new Chart(ctx, {
          type: "bar",
          data: {
            labels: labels,
            datasets: [
              {
                label: "Current Period",
                data: currentData,
                backgroundColor: "#F4A261",
                hoverBackgroundColor: "#d88948",
              },
              {
                label: "Previous Period",
                data: previousData,
                backgroundColor: "#F6C7A7",
                hoverBackgroundColor: "#e0b398",
              },
            ],
          },

          options: {
            responsive: true,
            maintainAspectRatio: false,

            // GRID + AXIS STYLING
            scales: {
              x: {
                ticks: {
                  maxRotation: 45,
                  minRotation: 45,
                },
                grid: { display: false },
              },
              y: {
                beginAtZero: true,
                grid: {
                  color: "#e6e6e6",
                  borderDash: [4, 4],
                },
              },
            },

            // ⭐ HIGHLIGHT BAR ON HOVER (grey background block)
            plugins: {
              tooltip: {
                enabled: false, // fully custom tooltip
                external: customTooltip,
              },
              legend: {
                labels: { usePointStyle: true },
              },
            },

            // Highlight background effect
            hover: {
              mode: "nearest",
              intersect: true,
            },
          },
        });

        // ⭐ CUSTOM TOOLTIP FUNCTION (matches your attached image)
        function customTooltip(context) {
          const tooltipEl = getOrCreateTooltip(context.chart);

          const tooltipModel = context.tooltip;

          if (tooltipModel.opacity === 0) {
            tooltipEl.style.opacity = 0;
            return;
          }

          if (tooltipModel.body) {
            const labelIndex = tooltipModel.dataPoints[0].dataIndex;

            const titles = [
              "Total No of Defects",
              "Pending Defects",
              "Total Over Due Defects",
            ];

            const innerHtml = `
        <div style="
          background: white;
          padding: 12px 16px;
          border-radius: 6px;
          box-shadow: 0 2px 6px rgba(0,0,0,0.15);
          border: 1px solid #ddd;
          width: 180px;
        ">
          <strong>${titles[labelIndex]}</strong><br/><br/>

          <span style="color:#E76F51;">Previous Period :</span><br/>
          <small>Previous: 0</small><br/><br/>

          <span style="color:#E76F51;">Previous Period :</span><br/>
          <small>Previous: 0</small>
        </div>
      `;

            tooltipEl.innerHTML = innerHtml;
          }

          const { offsetLeft: positionX, offsetTop: positionY } =
            context.chart.canvas;

          tooltipEl.style.opacity = 1;
          tooltipEl.style.left = positionX + tooltipModel.caretX + "px";
          tooltipEl.style.top = positionY + tooltipModel.caretY + "px";
        }

        // Creates floating tooltip element
        function getOrCreateTooltip(chart) {
          let tooltipEl =
            chart.canvas.parentNode.querySelector(".chartjs-tooltip");

          if (!tooltipEl) {
            tooltipEl = document.createElement("div");
            tooltipEl.classList.add("chartjs-tooltip");
            tooltipEl.style.position = "absolute";
            tooltipEl.style.pointerEvents = "none";
            tooltipEl.style.transition = "all 0.1s ease";
            chart.canvas.parentNode.appendChild(tooltipEl);
          }
          return tooltipEl;
        }
      });
    </script>

    <!-- jQuery -->
    <script src="../assets/js/jquery-3.7.1.min.js"></script>

    <!-- Bootstrap Core JS -->
    <script src="../assets/js/bootstrap.bundle.min.js"></script>

    <!-- Feather Icon JS -->
    <script src="../assets/js/feather.min.js"></script>

    <!-- Slimscroll JS -->
    <script src="../assets/js/jquery.slimscroll.min.js"></script>

    <!-- Chart JS -->
    <script src="../assets/plugins/apexchart/apexcharts.min.js"></script>
    <script src="../assets/plugins/apexchart/chart-data.js"></script>

    <!-- Chart JS -->
    <script src="../assets/plugins/chartjs/chart.min.js"></script>
    <script src="../assets/plugins/chartjs/chart-data.js"></script>

    <!-- Datetimepicker JS -->
    <script src="../assets/js/moment.min.js"></script>
    <script src="../assets/js/bootstrap-datetimepicker.min.js"></script>

    <!-- Daterangepikcer JS -->
    <script src="../assets/plugins/daterangepicker/daterangepicker.js"></script>

    <!-- Summernote JS -->
    <script src="../assets/plugins/summernote/summernote-lite.min.js"></script>

    <!-- Bootstrap Tagsinput JS -->
    <script src="../assets/plugins/bootstrap-tagsinput/bootstrap-tagsinput.js"></script>

    <!-- Select2 JS -->
    <script src="../assets/plugins/select2/js/select2.min.js"></script>

    <!-- Color Picker JS -->
    <script src="../assets/plugins/@simonwep/pickr/pickr.es5.min.js"></script>

    <!-- Custom JS -->
    <script src="../assets/js/todo.js"></script>
    <script src="../assets/js/theme-colorpicker.js"></script>
    <script src="../assets/js/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  </body>
</html>
