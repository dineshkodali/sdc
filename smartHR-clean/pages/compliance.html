<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=0"
    />
    <title>Compliance - Operations Hub</title>

    <!-- Favicon -->
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="../assets/img/favicon.png"
    />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />

    <!-- Feather Icons -->
    <link rel="stylesheet" href="../assets/plugins/icons/feather/feather.css" />

    <!-- Tabler Icons -->
    <link
      rel="stylesheet"
      href="../assets/plugins/tabler-icons/tabler-icons.min.css"
    />

    <!-- Fontawesome -->
    <link
      rel="stylesheet"
      href="../assets/plugins/fontawesome/css/all.min.css"
    />

    <!-- Main CSS -->
    <link rel="stylesheet" href="../assets/css/style.css" />
  </head>

  <style>
    /* Fix sidebar scroll */
    .sidebar-inner {
      overflow-y: auto !important;
      height: calc(100vh - 60px) !important;
    }

    /* Active link grey highlight */
    .sidebar-menu ul li a.active {
      background: #f5f5f5 !important;
      color: #333 !important;
    }

    /* Hover grey */
    .sidebar-menu ul li a:hover {
      background: #f0f0f0 !important;
      color: #333 !important;
    }

    /* Mini sidebar collapse */
    .mini-sidebar .sidebar {
      width: 60px !important;
    }

    .mini-sidebar .sidebar .sidebar-menu ul li a span {
      display: none !important; /* hide menu text */
    }

    .mini-sidebar .sidebar .sidebar-menu ul li a i {
      margin-right: 0 !important;
      font-size: 20px;
    }

    /* Card-style background for the whole tab bar */
  </style>

  <body>

     <!-- Sidebar -->

    <div id="sidebar-container"></div>

    <!-- /Sidebar -->
    <!-- Main Wrapper -->
    <div class="main-wrapper">
      <!-- Header -->
      <div class="header">
        <div class="main-header">
          <div class="header-left">
            <a href="index.html" class="logo">
              <img src="../assets/img/logo.svg" alt="Logo" />
            </a>
            <a href="index.html" class="dark-logo">
              <img src="../assets/img/logo-white.svg" alt="Logo" />
            </a>
          </div>

          <a id="mobile_btn" class="mobile_btn" href="#sidebar">
            <span class="bar-icon">
              <span></span><span></span><span></span>
            </span>
          </a>

          <div class="header-user">
            <div class="nav user-menu nav-list">
              <div class="me-auto d-flex align-items-center" id="header-search">
                <a
                  id="toggle_btn"
                  href="javascript:void(0);"
                  class="btn btn-menubar me-1"
                >
                  <i class="ti ti-arrow-bar-to-left"></i>
                </a>

                <div class="input-group input-group-flat d-inline-flex me-1">
                  <span class="input-icon-addon">
                    <i class="ti ti-search"></i>
                  </span>
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Search in HRMS"
                  />
                  <span class="input-group-text">
                    <kbd>CTRL + /</kbd>
                  </span>
                </div>

                <a href="profile-settings.html" class="btn btn-menubar">
                  <i class="ti ti-settings-cog"></i>
                </a>
              </div>

              <div class="d-flex align-items-center">
                <a href="#" class="btn btn-menubar btnFullscreen">
                  <i class="ti ti-maximize"></i>
                </a>

                <a href="chat.html" class="btn btn-menubar position-relative">
                  <i class="ti ti-brand-hipchat"></i>
                  <span class="badge bg-info rounded-pill header-badge">5</span>
                </a>

                <a href="email.html" class="btn btn-menubar">
                  <i class="ti ti-mail"></i>
                </a>

                <div class="dropdown profile-dropdown">
                  <a
                    href="#"
                    class="dropdown-toggle d-flex align-items-center"
                    data-bs-toggle="dropdown"
                  >
                    <span class="avatar avatar-sm online">
                      <img
                        src="../assets/img/profiles/avatar-12.jpg"
                        class="rounded-circle"
                        alt=""
                      />
                    </span>
                  </a>
                  <div class="dropdown-menu shadow-none">
                    <a class="dropdown-item" href="profile.html">My Profile</a>
                    <a class="dropdown-item" href="profile-settings.html"
                      >Settings</a
                    >
                    <a class="dropdown-item" href="login.html">Logout</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- /Header -->

      <!-- Page Wrapper -->
      <div class="page-wrapper">
        <div class="content container-fluid">
          <!-- Page Header -->
          <div class="page-header">
            <div class="row align-items-center">
              <div class="col">
                <h3 class="page-title">Operations Hub / Compliance</h3>
                <ul class="breadcrumb">
                  <li class="breadcrumb-item">Operations Hub</li>
                  <li class="breadcrumb-item active">Compliance</li>
                </ul>
              </div>
            </div>
          </div>
          <!-- /Page Header -->

          <!-- Stats Cards -->
          <div class="row g-3 mb-4">
            <div class="col-xl-3 col-md-6">
              <div class="card card-body">
                <span>Total Tasks</span>
                <h3 class="mt-2">2</h3>
                <p class="text-success">
                  <i class="ti ti-trending-up"></i> 100% active
                </p>
              </div>
            </div>

            <div class="col-xl-3 col-md-6">
              <div class="card card-body">
                <span>Overdue</span>
                <h3 class="text-danger mt-2">2</h3>
                <p class="text-danger">
                  <i class="ti ti-alert-triangle"></i> 100% of total
                </p>
              </div>
            </div>

            <div class="col-xl-3 col-md-6">
              <div class="card card-body">
                <span>Due This Week</span>
                <h3 class="mt-2">0</h3>
                <p class="text-warning"><i class="ti ti-clock"></i> 0%</p>
              </div>
            </div>

            <div class="col-xl-3 col-md-6">
              <div class="card card-body">
                <span>Completed</span>
                <h3 class="text-success mt-2">0</h3>
                <p class="text-success">
                  <i class="ti ti-check"></i> 0% of total
                </p>
              </div>
            </div>
          </div>
          <!-- /Stats Cards -->

          <!-- Database + Search -->
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h4 class="mb-0">
              Compliance Database <span class="text-muted">2 items</span>
            </h4>

            <div class="d-flex gap-2">
              <input
                type="text"
                class="form-control"
                placeholder="Search tasks..."
                style="width: 240px"
              />
              <button class="btn btn-light" type="button" id="filterBtn">
                <i class="ti ti-filter"></i> Filter
              </button>
              <button class="btn btn-light">
                <i class="ti ti-layout-grid"></i> View
              </button>
              <button class="btn btn-success">
                <i class="ti ti-plus"></i> New
              </button>

              <!-- FILTER DROPDOWN -->
              <div class="filter-dropdown d-none" id="filterDropdown">
                <div class="filter-header">
                  <span>Add filter</span>
                  <i class="ti ti-x filter-close" id="closeFilter"></i>
                </div>

                <div class="filter-search">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Filter by..."
                  />
                </div>

                <div class="filter-list">
                  <div class="filter-item">
                    <i class="ti ti-file-text"></i> Name
                  </div>
                  <div class="filter-item">
                    <i class="ti ti-user"></i> Assignee
                  </div>
                  <div class="filter-item">
                    <i class="ti ti-user-plus"></i> Created by
                  </div>
                  <div class="filter-item">
                    <i class="ti ti-clock"></i> Created time
                  </div>
                  <div class="filter-item">
                    <i class="ti ti-edit"></i> Last edited by
                  </div>
                  <div class="filter-item">
                    <i class="ti ti-tag"></i> Priority
                  </div>
                  <div class="filter-item">
                    <i class="ti ti-user"></i> Reported by
                  </div>
                  <div class="filter-item">
                    <i class="ti ti-calendar"></i> Resolved time
                  </div>
                  <div class="filter-item">
                    <i class="ti ti-activity"></i> Status
                  </div>
                  <div class="filter-item"><i class="ti ti-hash"></i> Tags</div>
                  <div class="filter-item">
                    <i class="ti ti-user-check"></i> Updated by
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Tabs -->
          <ul class="nav nav-tabs mb-3" id="taskTabs">
            <li class="nav-item">
              <a class="nav-link active" data-view="table" href="#">
                <i class="ti ti-table me-1"></i> Table
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" data-view="board" href="#">
                <i class="ti ti-layout-board me-1"></i> Board
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" data-view="dashboard" href="#">
                <i class="ti ti-chart-bar me-1"></i> Dashboard
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" data-view="widgets" href="#">
                <i class="ti ti-grid-dots me-1"></i> Widgets
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" data-view="livebi" href="#">
                <i class="ti ti-trending-up me-1"></i> Live BI
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" data-view="settings" href="#">
                <i class="ti ti-settings me-1"></i> Settings
              </a>
            </li>
          </ul>

          <!-- Compliance Table -->
          <div id="tableView">
            <div class="card">
              <div class="card-body p-0">
                <div class="table-responsive">
                  <table class="table table-hover mb-0">
                    <thead>
                      <tr>
                        <th>
                          <i class="ti ti-file-description me-1"></i> Task Title
                        </th>

                        <!-- Start Date -->

                        <th
                          style="position: relative"
                          class="header-th"
                          data-col="1"
                        >
                          <div class="d-flex align-items-center gap-1 th-label">
                            <i class="ti ti-calendar-event me-1"></i>
                            <span>Start Date</span>
                            <i class="ti ti-chevron-down header-arrow"></i>
                            <button
                              class="category-menu-btn"
                              type="button"
                              onclick="toggleGenericMenu(event, this)"
                            >
                              <i class="ti ti-dots"></i>
                            </button>
                          </div>

                          <div class="category-dropdown d-none">
                            <div
                              class="dropdown-item"
                              onclick="toggleGenericSort(this)"
                            >
                              <i class="ti ti-arrows-sort"></i>
                              <span class="sort-label">Sort A → Z</span>
                            </div>
                            <div
                              class="dropdown-item d-flex justify-content-between"
                            >
                              <span><i class="ti ti-filter"></i> Filter</span>
                              <i class="ti ti-chevron-right"></i>
                            </div>
                            <div
                              class="dropdown-item text-danger"
                              onclick="hideGenericColumn(this)"
                            >
                              <i class="ti ti-eye-off"></i> Hide
                            </div>
                          </div>
                        </th>
                        <!-- CATEGORY  -->

                        <th style="position: relative" class="category-th">
                          <div class="d-flex align-items-center gap-1 th-label">
                            <i class="ti ti-tag me-1"></i>
                            <span>Category</span>
                            <i class="ti ti-chevron-down category-arrow"></i>
                            <button
                              class="category-menu-btn"
                              onclick="toggleCategoryMenu(event)"
                              type="button"
                            >
                              <i class="ti ti-dots"></i>
                            </button>
                          </div>

                          <div
                            class="category-dropdown d-none"
                            id="categoryDropdown"
                          >
                            <div
                              class="dropdown-item"
                              onclick="toggleCategorySort()"
                              id="categorySortBtn"
                            >
                              <i class="ti ti-arrows-sort"></i>
                              <span id="sortLabel">Sort A → Z</span>
                            </div>

                            <div
                              class="dropdown-item d-flex justify-content-between align-items-center"
                            >
                              <span><i class="ti ti-filter"></i> Filter</span>
                              <i class="ti ti-chevron-right"></i>
                            </div>

                            <div class="dropdown-item text-danger">
                              <i class="ti ti-eye-off"></i> Hide
                            </div>
                          </div>
                        </th>

                        <!-- Site Name -->

                        <th
                          style="position: relative"
                          class="header-th"
                          data-col="3"
                        >
                          <div class="d-flex align-items-center gap-1 th-label">
                            <i class="ti ti-building me-1"></i>
                            <span>Site Name</span>
                            <i class="ti ti-chevron-down header-arrow"></i>
                            <button
                              class="category-menu-btn"
                              type="button"
                              onclick="toggleGenericMenu(event, this)"
                            >
                              <i class="ti ti-dots"></i>
                            </button>
                          </div>

                          <div class="category-dropdown d-none">
                            <div
                              class="dropdown-item"
                              onclick="toggleGenericSort(this)"
                            >
                              <i class="ti ti-arrows-sort"></i>
                              <span class="sort-label">Sort A → Z</span>
                            </div>
                            <div
                              class="dropdown-item d-flex justify-content-between"
                            >
                              <span><i class="ti ti-filter"></i> Filter</span>
                              <i class="ti ti-chevron-right"></i>
                            </div>
                            <div class="dropdown-item text-danger">
                              <i class="ti ti-eye-off"></i> Hide
                            </div>
                          </div>
                        </th>

                        <!-- Room No -->
                        <th
                          style="position: relative"
                          class="header-th"
                          data-col="4"
                        >
                          <div class="d-flex align-items-center gap-1 th-label">
                            <i class="ti ti-home me-1"></i>
                            <span>Room No</span>
                            <i class="ti ti-chevron-down header-arrow"></i>
                            <button
                              class="category-menu-btn"
                              type="button"
                              onclick="toggleGenericMenu(event, this)"
                            >
                              <i class="ti ti-dots"></i>
                            </button>
                          </div>

                          <div class="category-dropdown d-none">
                            <div
                              class="dropdown-item"
                              onclick="toggleGenericSort(this)"
                            >
                              <i class="ti ti-arrows-sort"></i>
                              <span class="sort-label">Sort A → Z</span>
                            </div>
                            <div
                              class="dropdown-item d-flex justify-content-between"
                            >
                              <span><i class="ti ti-filter"></i> Filter</span>
                              <i class="ti ti-chevron-right"></i>
                            </div>
                            <div class="dropdown-item text-danger">
                              <i class="ti ti-eye-off"></i> Hide
                            </div>
                          </div>
                        </th>

                        <!-- Raised By -->
                        <th
                          style="position: relative"
                          class="header-th"
                          data-col="5"
                        >
                          <div class="d-flex align-items-center gap-1 th-label">
                            <i class="ti ti-user me-1"></i>
                            <span>Raised By</span>
                            <i class="ti ti-chevron-down header-arrow"></i>
                            <button
                              class="category-menu-btn"
                              type="button"
                              onclick="toggleGenericMenu(event, this)"
                            >
                              <i class="ti ti-dots"></i>
                            </button>
                          </div>

                          <div class="category-dropdown d-none">
                            <div
                              class="dropdown-item"
                              onclick="toggleGenericSort(this)"
                            >
                              <i class="ti ti-arrows-sort"></i>
                              <span class="sort-label">Sort A → Z</span>
                            </div>
                            <div
                              class="dropdown-item d-flex justify-content-between"
                            >
                              <span><i class="ti ti-filter"></i> Filter</span>
                              <i class="ti ti-chevron-right"></i>
                            </div>
                            <div class="dropdown-item text-danger">
                              <i class="ti ti-eye-off"></i> Hide
                            </div>
                          </div>
                        </th>

                        <!-- Status -->
                        <th
                          style="position: relative"
                          class="header-th"
                          data-col="6"
                        >
                          <div class="d-flex align-items-center gap-1 th-label">
                            <i class="ti ti-activity me-1"></i>
                            <span>Status</span>
                            <i class="ti ti-chevron-down header-arrow"></i>
                            <button
                              class="category-menu-btn"
                              type="button"
                              onclick="toggleGenericMenu(event, this)"
                            >
                              <i class="ti ti-dots"></i>
                            </button>
                          </div>

                          <div class="category-dropdown d-none">
                            <div
                              class="dropdown-item"
                              onclick="toggleGenericSort(this)"
                            >
                              <i class="ti ti-arrows-sort"></i>
                              <span class="sort-label">Sort A → Z</span>
                            </div>
                            <div
                              class="dropdown-item d-flex justify-content-between"
                            >
                              <span><i class="ti ti-filter"></i> Filter</span>
                              <i class="ti ti-chevron-right"></i>
                            </div>
                            <div class="dropdown-item text-danger">
                              <i class="ti ti-eye-off"></i> Hide
                            </div>
                          </div>
                        </th>

                        <!-- Action -->
                        <th
                          style="position: relative"
                          class="header-th"
                          data-col="7"
                        >
                          <div class="d-flex align-items-center gap-1 th-label">
                            <i class="ti ti-tool me-1"></i>
                            <span>Action</span>
                            <i class="ti ti-chevron-down header-arrow"></i>
                            <button
                              class="category-menu-btn"
                              type="button"
                              onclick="toggleGenericMenu(event, this)"
                            >
                              <i class="ti ti-dots"></i>
                            </button>
                          </div>

                          <div class="category-dropdown d-none">
                            <div
                              class="dropdown-item"
                              onclick="toggleGenericSort(this)"
                            >
                              <i class="ti ti-arrows-sort"></i>
                              <span class="sort-label">Sort A → Z</span>
                            </div>
                            <div
                              class="dropdown-item d-flex justify-content-between"
                            >
                              <span><i class="ti ti-filter"></i> Filter</span>
                              <i class="ti ti-chevron-right"></i>
                            </div>
                            <div class="dropdown-item text-danger">
                              <i class="ti ti-eye-off"></i> Hide
                            </div>
                          </div>
                        </th>

                        <th
                          style="position: relative"
                          class="header-th"
                          data-col="8"
                        >
                          <div class="d-flex align-items-center gap-1 th-label">
                            <i class="ti ti-calendar-time me-1"></i>
                            <span>Due Date</span>
                            <i class="ti ti-chevron-down header-arrow"></i>
                            <button
                              class="category-menu-btn"
                              type="button"
                              onclick="toggleGenericMenu(event, this)"
                            >
                              <i class="ti ti-dots"></i>
                            </button>
                          </div>

                          <div class="category-dropdown d-none">
                            <div
                              class="dropdown-item"
                              onclick="toggleGenericSort(this)"
                            >
                              <i class="ti ti-arrows-sort"></i
                              ><span class="sort-label">Sort A → Z</span>
                            </div>
                            <div
                              class="dropdown-item d-flex justify-content-between"
                            >
                              <span><i class="ti ti-filter"></i> Filter</span>
                              <i class="ti ti-chevron-right"></i>
                            </div>
                            <div class="dropdown-item text-danger">
                              <i class="ti ti-eye-off"></i> Hide
                            </div>
                          </div>
                        </th>

                        <th
                          style="position: relative"
                          class="header-th"
                          data-col="9"
                        >
                          <div class="d-flex align-items-center gap-1 th-label">
                            <i class="ti ti-clock me-1"></i>
                            <span>Closed</span>
                            <i class="ti ti-chevron-down header-arrow"></i>
                            <button
                              class="category-menu-btn"
                              type="button"
                              onclick="toggleGenericMenu(event, this)"
                            >
                              <i class="ti ti-dots"></i>
                            </button>
                          </div>

                          <div class="category-dropdown d-none">
                            <div
                              class="dropdown-item"
                              onclick="toggleGenericSort(this)"
                            >
                              <i class="ti ti-arrows-sort"></i>
                              <span class="sort-label">Sort A → Z</span>
                            </div>
                            <div
                              class="dropdown-item d-flex justify-content-between"
                            >
                              <span><i class="ti ti-filter"></i> Filter</span>
                              <i class="ti ti-chevron-right"></i>
                            </div>
                            <div class="dropdown-item text-danger">
                              <i class="ti ti-eye-off"></i> Hide
                            </div>
                          </div>
                        </th>

                        <th><i class="ti ti-dots me-1"></i> Options</th>
                      </tr>
                    </thead>
                    <tbody>
                      <!-- Row 1 -->
                      <tr style="border-left: 4px solid #f4b400">
                        <td>Data Protection Compliance Review</td>
                        <td>-</td>
                        <td class="fw-bold text-danger">HIGH</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                        <td>Open</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                        <td>
                          <i class="ti ti-edit me-2"></i>
                          <i class="ti ti-trash"></i>
                        </td>
                      </tr>

                      <!-- Row 2 -->
                      <tr style="border-left: 4px solid #4caf50">
                        <td>Test</td>
                        <td>-</td>
                        <td class="fw-bold" style="color: #2e7d32">CAT3</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                        <td>Open</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                        <td>
                          <i class="ti ti-edit me-2"></i>
                          <i class="ti ti-trash"></i>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <!-- WIDGETS VIEW -->
          <div id="widgetsview" style="display: none">
            <div class="widget-placeholder">
              <div class="widget-box">
                <div class="widget-icon">
                  <i class="ti ti-grid-dots"></i>
                </div>
                <h5 class="mt-3">Widget Dashboard</h5>
                <p>
                  Customizable widgets and dashboard components will be
                  displayed here.
                </p>
              </div>
            </div>
          </div>
          
        </div>
      </div>

      <!-- /Page Wrapper -->
    </div>
    <!-- /Main Wrapper -->

    <!-- JS Files -->
        <script>
  fetch("../assets/includes/sidebar.html")
    .then(response => response.text())
    .then(data => {
      document.getElementById("sidebar-container").innerHTML = data;
    });
</script>


    <script src="../assets/js/jquery-3.7.1.min.js"></script>
    <script src="../assets/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/script.js"></script>
    <script>
      const filterBtn = document.getElementById("filterBtn");
      const filterDropdown = document.getElementById("filterDropdown");
      const closeFilter = document.getElementById("closeFilter");

      filterBtn.addEventListener("click", function (e) {
        e.stopPropagation();
        filterDropdown.classList.toggle("d-none");
      });

      closeFilter.addEventListener("click", function () {
        filterDropdown.classList.add("d-none");
      });

      // Close when clicking outside
      document.addEventListener("click", function () {
        filterDropdown.classList.add("d-none");
      });

      // Prevent inside clicks from closing
      filterDropdown.addEventListener("click", function (e) {
        e.stopPropagation();
      });
    </script>
    <!-- <script src="../assets/js/filter.js"></script> -->
    <script>
      // Sidebar toggle (collapse / expand)
      $(document).on("click", "#toggle_btn", function () {
        $("body").toggleClass("mini-sidebar");

        if (!$("body").hasClass("mini-sidebar")) {
          $(".subdrop + ul").slideDown();
        } else {
          $(".subdrop + ul").slideUp();
        }

        return false;
      });
    </script>

    <script>
      document.querySelectorAll("#taskTabs .nav-link").forEach((tab) => {
        tab.addEventListener("click", function (e) {
          e.preventDefault();

          // Remove active class from all tabs
          document
            .querySelectorAll("#taskTabs .nav-link")
            .forEach((t) => t.classList.remove("active"));

          // Add active to clicked tab
          this.classList.add("active");

          const view = this.getAttribute("data-view");

          // Toggle views
          document.getElementById("tableView").style.display =
            view === "table" ? "block" : "none";
          document.getElementById("boardView").style.display =
            view === "board" ? "block" : "none";
        });
      });
    </script>

    <script>
      document.querySelectorAll("#taskTabs .nav-link").forEach((tab) => {
        tab.addEventListener("click", function () {
          // Remove active state
          document
            .querySelectorAll("#taskTabs .nav-link")
            .forEach((t) => t.classList.remove("active"));
          this.classList.add("active");

          let view = this.getAttribute("data-view");

          // Hide all views
          document.getElementById("tableView").style.display = "none";
          document.getElementById("boardView").style.display = "none";
          document.getElementById("dashboardView").style.display = "none";
          document.getElementById("widgetsview").style.display = "none";

          if (view === "table") {
            document.getElementById("tableView").style.display = "block";
          }
          if (view === "board") {
            document.getElementById("boardView").style.display = "block";
          }
          if (view === "dashboard") {
            document.getElementById("dashboardView").style.display = "block";
          }
        });
      });
    </script>
    <script>
      document
        .querySelector('[data-view="widgets"]')
        .addEventListener("click", function (e) {
          e.preventDefault();

          // Hide existing working views (same as your pattern)
          document.getElementById("tableView").style.display = "none";
          document.getElementById("boardView").style.display = "none";
          document.getElementById("dashboardView").style.display = "none";
          document.getElementById("settingsview").style.display = "none";

          // Show ONLY widgets
          document.getElementById("widgetsview").style.display = "block";

          // Active tab highlight
          document
            .querySelectorAll("#taskTabs .nav-link")
            .forEach((t) => t.classList.remove("active"));
          this.classList.add("active");
        });
    </script>

    <script>
      function toggleGenericMenu(event, btn) {
        event.stopPropagation();

        const dropdown = btn.closest("th").querySelector(".category-dropdown");
        const isOpen = !dropdown.classList.contains("d-none");

        // Close all first
        document.querySelectorAll(".category-dropdown").forEach((menu) => {
          menu.classList.add("d-none");
        });

        // Toggle only this one
        if (!isOpen) {
          dropdown.classList.remove("d-none");
        }
      }

      /* Close all dropdowns on outside click */
      document.addEventListener("click", function () {
        document.querySelectorAll(".category-dropdown").forEach((menu) => {
          menu.classList.add("d-none");
        });
      });

      /* Prevent dropdown click from closing itself */
      document.querySelectorAll(".category-dropdown").forEach((dd) => {
        dd.addEventListener("click", function (e) {
          e.stopPropagation();
        });
      });
    </script>

    <script>
      let genericSortState = {}; // keeps state per column

      function toggleGenericSort(el) {
        const th = el.closest("th");
        const colIndex = Number(th.dataset.col);
        if (Number.isNaN(colIndex)) return;

        const table = document.querySelector("table");
        const tbody = table.querySelector("tbody");
        const rows = Array.from(tbody.querySelectorAll("tr"));

        // ✅ init only once
        if (!(colIndex in genericSortState)) {
          genericSortState[colIndex] = true; // first time: A → Z
        }
        const isAZ = genericSortState[colIndex];

        rows.sort((a, b) => {
          let A = a.children[colIndex].innerText.trim();
          let B = b.children[colIndex].innerText.trim();

          // Try date sort first
          if (!isNaN(Date.parse(A)) && !isNaN(Date.parse(B))) {
            return isAZ ? new Date(A) - new Date(B) : new Date(B) - new Date(A);
          }

          A = A.toUpperCase();
          B = B.toUpperCase();
          return isAZ ? A.localeCompare(B) : B.localeCompare(A);
        });

        rows.forEach((row) => tbody.appendChild(row));

        // Update label text
        const label = el.querySelector(".sort-label");
        if (label) {
          label.innerText = isAZ ? "Sort Z → A" : "Sort A → Z";
        }

        // ✅ flip state for next click
        genericSortState[colIndex] = !isAZ;

        const dropdown = th.querySelector(".category-dropdown");
        if (dropdown) dropdown.classList.add("d-none");
      }
    </script>

    <script>
      function hideGenericColumn(el) {
        const th = el.closest("th");
        const colIndex = parseInt(th.dataset.col);
        const table = document.querySelector("table");

        // Hide header
        th.style.display = "none";

        // Hide column cells
        table.querySelectorAll("tbody tr").forEach((row) => {
          row.children[colIndex].style.display = "none";
        });
      }
    </script>

    <script>
      let isCategorySortedAZ = true; // default state

      function toggleCategorySort() {
        const table = document.querySelector("table");
        const tbody = table.querySelector("tbody");
        const rows = Array.from(tbody.querySelectorAll("tr"));

        rows.sort((a, b) => {
          const catA = a.children[2].innerText.trim().toUpperCase(); // Category column
          const catB = b.children[2].innerText.trim().toUpperCase();

          return isCategorySortedAZ
            ? catA.localeCompare(catB) // A → Z
            : catB.localeCompare(catA); // Z → A
        });

        // Re-append rows
        rows.forEach((row) => tbody.appendChild(row));

        // Toggle label text
        const label = document.getElementById("sortLabel");
        label.innerText = isCategorySortedAZ ? "Sort Z → A" : "Sort A → Z";

        // Flip state
        isCategorySortedAZ = !isCategorySortedAZ;

        // Close dropdown
        document.getElementById("categoryDropdown").classList.add("d-none");
      }
    </script>
    <script>
      function toggleCategoryMenu(event) {
        event.stopPropagation();
        const dropdown = document.getElementById("categoryDropdown");
        dropdown.classList.toggle("d-none");
      }

      // Close menu when clicking outside
      document.addEventListener("click", function () {
        const dd = document.getElementById("categoryDropdown");
        if (dd && !dd.classList.contains("d-none")) {
          dd.classList.add("d-none");
        }
      });
    </script>
  </body>
</html>
