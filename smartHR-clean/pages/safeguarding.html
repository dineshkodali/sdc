<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=0"
    />
    <title>Safeguarding - Operations Hub</title>

    <!-- Favicon -->
    <link rel="shortcut icon" href="../assets/img/favicon.png" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />

    <!-- Feather Icons -->
    <link rel="stylesheet" href="../assets/plugins/icons/feather/feather.css" />

    <!-- Tabler Icons -->
    <link
      rel="stylesheet"
      href="../assets/plugins/tabler-icons/tabler-icons.min.css"
    />

    <!-- Fontawesome -->
    <link
      rel="stylesheet"
      href="../assets/plugins/fontawesome/css/all.min.css"
    />

    <!-- Main CSS -->
    <link rel="stylesheet" href="../assets/css/style.css" />
  </head>

  <style>
    .sidebar-inner {
      overflow-y: auto !important;
      height: calc(100vh - 60px) !important;
    }

    /* Active link (grey, not orange) */
    .sidebar-menu ul li a.active {
      background: #f5f5f5 !important;
      color: #333 !important;
    }

    /* Hover (light grey) */
    .sidebar-menu ul li a:hover {
      background: #f0f0f0 !important;
      color: #333 !important;
    }
    /* Mini sidebar collapse */
    .mini-sidebar .sidebar {
      width: 60px !important;
    }

    .mini-sidebar .sidebar .sidebar-menu ul li a span {
      display: none !important; /* hide menu text */
    }

    .mini-sidebar .sidebar .sidebar-menu ul li a i {
      margin-right: 0 !important;
      font-size: 20px;
    }

    /* Card-style background for the whole tab bar */
    #taskTabs {
      background: #f5f7fa; /* light card background */
      padding: 8px 10px;
      border-radius: 10px;
      display: inline-flex;
      gap: 8px;
      border: 1px solid #e3e6eb;
    }

    /* Individual tabs */
    #taskTabs .nav-link {
      border-radius: 8px;
      color: #444;
      font-weight: 500;
      padding: 8px 14px;
      border: none;
      background: transparent;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* Active tab (white card look) */
    #taskTabs .nav-link.active {
      background: #ffffff;
      color: #000;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
    }

    /* Hover effect */
    #taskTabs .nav-link:hover {
      background: #ffffff;
    }
  </style>

  <body>
    <div class="main-wrapper">
      <!-- Header -->
      <div class="header">
        <div class="main-header">
          <div class="header-left">
            <a href="index.html" class="logo">
              <img src="../assets/img/logo.svg" alt="Logo" />
            </a>
            <a href="index.html" class="dark-logo">
              <img src="../assets/img/logo-white.svg" alt="Logo" />
            </a>
          </div>

          <a id="mobile_btn" class="mobile_btn" href="#sidebar">
            <span class="bar-icon"
              ><span></span><span></span><span></span
            ></span>
          </a>

          <div class="header-user">
            <div class="nav user-menu nav-list">
              <div class="me-auto d-flex align-items-center" id="header-search">
                <a
                  id="toggle_btn"
                  href="javascript:void(0);"
                  class="btn btn-menubar me-1"
                >
                  <i class="ti ti-arrow-bar-to-left"></i>
                </a>

                <div class="input-group input-group-flat me-1">
                  <span class="input-icon-addon"
                    ><i class="ti ti-search"></i
                  ></span>
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Search in HRMS"
                  />
                  <span class="input-group-text"><kbd>CTRL + /</kbd></span>
                </div>

                <a href="profile-settings.html" class="btn btn-menubar">
                  <i class="ti ti-settings-cog"></i>
                </a>
              </div>

              <div class="d-flex align-items-center">
                <a href="#" class="btn btn-menubar btnFullscreen">
                  <i class="ti ti-maximize"></i>
                </a>
                <a href="chat.html" class="btn btn-menubar position-relative">
                  <i class="ti ti-brand-hipchat"></i>
                  <span class="badge bg-info rounded-pill header-badge">5</span>
                </a>
                <a href="email.html" class="btn btn-menubar">
                  <i class="ti ti-mail"></i>
                </a>

                <div class="dropdown profile-dropdown">
                  <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown">
                    <span class="avatar avatar-sm online">
                      <img
                        src="../assets/img/profiles/avatar-12.jpg"
                        class="rounded-circle"
                      />
                    </span>
                  </a>
                  <div class="dropdown-menu shadow-none">
                    <a class="dropdown-item" href="profile.html">My Profile</a>
                    <a class="dropdown-item" href="profile-settings.html"
                      >Settings</a
                    >
                    <a class="dropdown-item" href="login.html">Logout</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- /Header -->

      <!-- Sidebar -->
      <div class="sidebar" id="sidebar">
        <div class="sidebar-logo">
          <a href="index.html" class="logo logo-normal">
            <img src="../assets/img/logo.svg" alt="Logo" />
          </a>
          <a href="index.html" class="logo-small">
            <img src="../assets/img/logo-small.svg" alt="Logo" />
          </a>
        </div>

        <div class="sidebar-inner slimscroll">
          <div id="sidebar-menu" class="sidebar-menu">
            <ul>
              <li class="menu-title">
                <span>MAIN</span>
              </li>

              <li>
                <a href="index.html">
                  <i class="ti ti-smart-home"></i>
                  <span>Dashboard</span>
                </a>
              </li>

              <li class="menu-title">
                <span>HOTELS</span>
              </li>
              <li>
                <a href="hotels.html">
                  <i class="ti ti-building"></i>
                  <span>Hotels</span>
                </a>
              </li>
              <li>
                <a href="hoteldetails.html">
                  <i class="ti ti-building-community"></i>
                  <span>Hotel Details</span>
                </a>
              </li>

              <li class="menu-title">
                <span>CONTACTS</span>
              </li>
              <li>
                <a href="contacts.html">
                  <i class="ti ti-user"></i>
                  <span>Contacts</span>
                </a>
              </li>

              <li class="menu-title">
                <span>OPERATION HUB</span>
              </li>
              <li>
                <a href="maintenance.html">
                  <i class="ti ti-settings"></i>
                  <span>Maintenance</span>
                </a>
              </li>
              <li>
                <a href="compliance.html">
                  <i class="ti ti-user-check"></i>
                  <span>Compliance</span>
                </a>
              </li>
              <li>
                <a href="complaints.html">
                  <i class="ti ti-filter"></i>
                  <span>Complaints</span>
                </a>
              </li>
              <li>
                <a href="airetasks.html">
                  <i class="ti ti-device-analytics"></i>
                  <span>AIRE Tasks</span>
                </a>
              </li>
              <li>
                <a href="litigation.html">
                  <i class="ti ti-briefcase"></i>
                  <span>Litigation</span>
                </a>
              </li>
              <li>
                <a href="safeguarding.html">
                  <i class="ti ti-activity"></i>
                  <span>Safeguarding</span>
                </a>
              </li>
              <li>
                <a href="migranthelp.html">
                  <i class="ti ti-target"></i>
                  <span>Migrant Help</span>
                </a>
              </li>
              <li>
                <a href="employees.html">
                  <i class="ti ti-users"></i>
                  <span>Employees</span>
                </a>
              </li>

              <li class="menu-title">
                <span>Service Users</span>
              </li>
              <li>
                <a href="suprofiles.html">
                  <i class="ti ti-user-circle"></i>
                  <span>SU Profiles</span>
                </a>
              </li>

              <li>
                <a href="demographics.html">
                  <i class="ti ti-heart"></i>
                  <span>Demographics & Health</span>
                </a>
              </li>

              <li>
                <a href="accommodation.html">
                  <i class="ti ti-home"></i>
                  <span>Accommodation History</span>
                </a>
              </li>

              <li>
                <a href="casedocumentation.html">
                  <i class="ti ti-file-description"></i>
                  <span>Case Documents</span>
                </a>
              </li>

              <li class="menu-title">
                <span>INCIDENET MANAGEMENT</span>
              </li>
              <li>
                <a href="incidents.html">
                  <i class="ti ti-alert-circle"></i>
                  <span>Incidents</span>
                </a>
              </li>

              <li>
                <a href="complaintsfromincidents.html">
                  <i class="ti ti-message"></i>
                  <span>Complaints</span>
                </a>
              </li>

              <li>
                <a href="vcsorganisations.html">
                  <i class="ti ti-building"></i>
                  <span>VCS Organisations</span>
                </a>
              </li>

              <li class="menu-title">
                <span>PROJECTS</span>
              </li>
              <li>
                <a href="projects.html">
                  <i class="ti ti-box"></i>
                  <span>Projects</span>
                </a>
              </li>
              <li>
                <a href="tasks.html">
                  <i class="ti ti-list-check"></i>
                  <span>Tasks</span>
                </a>
              </li>
              <li>
                <a href="activities.html">
                  <i class="ti ti-activity"></i>
                  <span>Activities</span>
                </a>
              </li>

              <li class="menu-title">
                <span>REPORTS</span>
              </li>
              <li>
                <a href="employee-report.html">
                  <i class="ti ti-file-analytics"></i>
                  <span>Employee Report</span>
                </a>
              </li>
              <li>
                <a href="user-report.html">
                  <i class="ti ti-report"></i>
                  <span>User Report</span>
                </a>
              </li>
              <li>
                <a href="company-report.html">
                  <i class="ti ti-report-money"></i>
                  <span>Company Report</span>
                </a>
              </li>

              <li class="menu-title">
                <span>PROFILE</span>
              </li>
              <li>
                <a href="profile.html">
                  <i class="ti ti-user-circle"></i>
                  <span>My Profile</span>
                </a>
              </li>
              <li>
                <a href="profile-settings.html">
                  <i class="ti ti-settings"></i>
                  <span>Profile Settings</span>
                </a>
              </li>

              <li class="menu-title">
                <span>AUTH</span>
              </li>
              <li>
                <a href="login.html">
                  <i class="ti ti-login"></i>
                  <span>Login</span>
                </a>
              </li>
              <li>
                <a href="register.html">
                  <i class="ti ti-forms"></i>
                  <span>Register</span>
                </a>
              </li>
              <li>
                <a href="forgot-password.html">
                  <i class="ti ti-lock"></i>
                  <span>Forgot Password</span>
                </a>
              </li>
              <li>
                <a href="reset-password.html">
                  <i class="ti ti-key"></i>
                  <span>Reset Password</span>
                </a>
              </li>
              <li>
                <a href="two-step-verification.html">
                  <i class="ti ti-shield-check"></i>
                  <span>Two-Step Verification</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!-- /Sidebar -->

      <!-- Page Content -->
      <div class="page-wrapper">
        <div class="content container-fluid">
          <!-- Page Header -->
          <div class="page-header">
            <h3 class="page-title">Operations Hub / Safeguarding</h3>
            <ul class="breadcrumb">
              <li class="breadcrumb-item">Operations Hub</li>
              <li class="breadcrumb-item active">Safeguarding</li>
            </ul>
          </div>

          <!-- Stats Row -->
          <div class="row g-3 mb-4">
            <div class="col-xl-3 col-md-6">
              <div class="card card-body">
                <span>Total Cases</span>
                <h3 class="mt-2">6</h3>
                <p class="text-success">
                  <i class="ti ti-check"></i> Active Monitoring
                </p>
              </div>
            </div>

            <div class="col-xl-3 col-md-6">
              <div class="card card-body">
                <span>High Risk</span>
                <h3 class="text-danger mt-2">2</h3>
                <p class="text-danger">
                  <i class="ti ti-alert-triangle"></i> Immediate Attention
                </p>
              </div>
            </div>

            <div class="col-xl-3 col-md-6">
              <div class="card card-body">
                <span>Medium Risk</span>
                <h3 class="text-warning mt-2">2</h3>
                <p class="text-warning">
                  <i class="ti ti-clock"></i> Under Review
                </p>
              </div>
            </div>

            <div class="col-xl-3 col-md-6">
              <div class="card card-body">
                <span>Low Risk</span>
                <h3 class="text-success mt-2">2</h3>
                <p class="text-success"><i class="ti ti-check"></i> Stable</p>
              </div>
            </div>
          </div>

          <!-- Filter row -->
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h4 class="mb-0">
              Cases Database <span class="text-muted">6 items</span>
            </h4>
            <div class="d-flex gap-2">
              <input
                type="text"
                class="form-control"
                placeholder="Search cases..."
                style="width: 240px"
              />
              <button class="btn btn-light">
                <i class="ti ti-filter"></i> Filter
              </button>
              <button class="btn btn-light">
                <i class="ti ti-layout-grid"></i> View
              </button>
              <button class="btn btn-success">
                <i class="ti ti-plus"></i> New
              </button>
            </div>
          </div>

          <!-- Tabs -->
          <ul class="nav nav-tabs mb-3" id="taskTabs">
            <li class="nav-item">
              <a class="nav-link active" data-view="table" href="#">
                <i class="ti ti-table me-1"></i> Table
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" data-view="board" href="#">
                <i class="ti ti-layout-board me-1"></i> Board
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" data-view="dashboard" href="#">
                <i class="ti ti-chart-bar me-1"></i> Dashboard
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" data-view="widgets" href="#">
                <i class="ti ti-grid-dots me-1"></i> Widgets
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" data-view="livebi" href="#">
                <i class="ti ti-trending-up me-1"></i> Live BI
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" data-view="settings" href="#">
                <i class="ti ti-settings me-1"></i> Settings
              </a>
            </li>
          </ul>

          <!-- Safeguarding Table -->
          <div class="card">
            <div class="card-body p-0">
              <div class="table-responsive">
                <table class="table table-hover mb-0">
                  <thead>
                    <tr>
                      <th>
                        <i class="ti ti-file-description me-1"></i> Task Title
                      </th>

                      <!-- Start Date -->
                      <th
                        style="position: relative"
                        class="header-th"
                        data-col="1"
                      >
                        <div class="d-flex align-items-center gap-1 th-label">
                          <i class="ti ti-calendar-event me-1"></i>
                          <span>Start Date</span>
                          <i class="ti ti-chevron-down header-arrow"></i>
                          <button
                            class="category-menu-btn"
                            type="button"
                            onclick="toggleGenericMenu(event, this)"
                          >
                            <i class="ti ti-dots"></i>
                          </button>
                        </div>

                        <div class="category-dropdown d-none">
                          <div
                            class="dropdown-item"
                            onclick="toggleGenericSort(this)"
                          >
                            <i class="ti ti-arrows-sort"></i>
                            <span class="sort-label">Sort A → Z</span>
                          </div>
                          <div
                            class="dropdown-item d-flex justify-content-between"
                          >
                            <span><i class="ti ti-filter"></i> Filter</span>
                            <i class="ti ti-chevron-right"></i>
                          </div>
                          <div
                            class="dropdown-item text-danger"
                            onclick="hideGenericColumn(this)"
                          >
                            <i class="ti ti-eye-off"></i> Hide
                          </div>
                        </div>
                      </th>

                      <!-- CATEGORY  -->
                      <th style="position: relative" class="category-th">
                        <div class="d-flex align-items-center gap-1 th-label">
                          <i class="ti ti-tag me-1"></i>
                          <span>Category</span>
                          <i class="ti ti-chevron-down category-arrow"></i>
                          <button
                            class="category-menu-btn"
                            onclick="toggleCategoryMenu(event)"
                            type="button"
                          >
                            <i class="ti ti-dots"></i>
                          </button>
                        </div>

                        <div
                          class="category-dropdown d-none"
                          id="categoryDropdown"
                        >
                          <div
                            class="dropdown-item"
                            onclick="toggleCategorySort()"
                            id="categorySortBtn"
                          >
                            <i class="ti ti-arrows-sort"></i>
                            <span id="sortLabel">Sort A → Z</span>
                          </div>

                          <div
                            class="dropdown-item d-flex justify-content-between align-items-center"
                          >
                            <span><i class="ti ti-filter"></i> Filter</span>
                            <i class="ti ti-chevron-right"></i>
                          </div>

                          <div class="dropdown-item text-danger">
                            <i class="ti ti-eye-off"></i> Hide
                          </div>
                        </div>
                      </th>

                      <!-- Site Name -->
                      <th
                        style="position: relative"
                        class="header-th"
                        data-col="3"
                      >
                        <div class="d-flex align-items-center gap-1 th-label">
                          <i class="ti ti-building me-1"></i>
                          <span>Site Name</span>
                          <i class="ti ti-chevron-down header-arrow"></i>
                          <button
                            class="category-menu-btn"
                            type="button"
                            onclick="toggleGenericMenu(event, this)"
                          >
                            <i class="ti ti-dots"></i>
                          </button>
                        </div>

                        <div class="category-dropdown d-none">
                          <div
                            class="dropdown-item"
                            onclick="toggleGenericSort(this)"
                          >
                            <i class="ti ti-arrows-sort"></i>
                            <span class="sort-label">Sort A → Z</span>
                          </div>
                          <div
                            class="dropdown-item d-flex justify-content-between"
                          >
                            <span><i class="ti ti-filter"></i> Filter</span>
                            <i class="ti ti-chevron-right"></i>
                          </div>
                          <div class="dropdown-item text-danger">
                            <i class="ti ti-eye-off"></i> Hide
                          </div>
                        </div>
                      </th>

                      <!-- Room No -->
                      <th
                        style="position: relative"
                        class="header-th"
                        data-col="4"
                      >
                        <div class="d-flex align-items-center gap-1 th-label">
                          <i class="ti ti-home me-1"></i>
                          <span>Room No</span>
                          <i class="ti ti-chevron-down header-arrow"></i>
                          <button
                            class="category-menu-btn"
                            type="button"
                            onclick="toggleGenericMenu(event, this)"
                          >
                            <i class="ti ti-dots"></i>
                          </button>
                        </div>

                        <div class="category-dropdown d-none">
                          <div
                            class="dropdown-item"
                            onclick="toggleGenericSort(this)"
                          >
                            <i class="ti ti-arrows-sort"></i>
                            <span class="sort-label">Sort A → Z</span>
                          </div>
                          <div
                            class="dropdown-item d-flex justify-content-between"
                          >
                            <span><i class="ti ti-filter"></i> Filter</span>
                            <i class="ti ti-chevron-right"></i>
                          </div>
                          <div class="dropdown-item text-danger">
                            <i class="ti ti-eye-off"></i> Hide
                          </div>
                        </div>
                      </th>

                      <!-- Raised By -->
                      <th
                        style="position: relative"
                        class="header-th"
                        data-col="5"
                      >
                        <div class="d-flex align-items-center gap-1 th-label">
                          <i class="ti ti-user me-1"></i>
                          <span>Raised By</span>
                          <i class="ti ti-chevron-down header-arrow"></i>
                          <button
                            class="category-menu-btn"
                            type="button"
                            onclick="toggleGenericMenu(event, this)"
                          >
                            <i class="ti ti-dots"></i>
                          </button>
                        </div>

                        <div class="category-dropdown d-none">
                          <div
                            class="dropdown-item"
                            onclick="toggleGenericSort(this)"
                          >
                            <i class="ti ti-arrows-sort"></i>
                            <span class="sort-label">Sort A → Z</span>
                          </div>
                          <div
                            class="dropdown-item d-flex justify-content-between"
                          >
                            <span><i class="ti ti-filter"></i> Filter</span>
                            <i class="ti ti-chevron-right"></i>
                          </div>
                          <div class="dropdown-item text-danger">
                            <i class="ti ti-eye-off"></i> Hide
                          </div>
                        </div>
                      </th>

                      <!-- Status -->
                      <th
                        style="position: relative"
                        class="header-th"
                        data-col="6"
                      >
                        <div class="d-flex align-items-center gap-1 th-label">
                          <i class="ti ti-activity me-1"></i>
                          <span>Status</span>
                          <i class="ti ti-chevron-down header-arrow"></i>
                          <button
                            class="category-menu-btn"
                            type="button"
                            onclick="toggleGenericMenu(event, this)"
                          >
                            <i class="ti ti-dots"></i>
                          </button>
                        </div>

                        <div class="category-dropdown d-none">
                          <div
                            class="dropdown-item"
                            onclick="toggleGenericSort(this)"
                          >
                            <i class="ti ti-arrows-sort"></i>
                            <span class="sort-label">Sort A → Z</span>
                          </div>
                          <div
                            class="dropdown-item d-flex justify-content-between"
                          >
                            <span><i class="ti ti-filter"></i> Filter</span>
                            <i class="ti ti-chevron-right"></i>
                          </div>
                          <div class="dropdown-item text-danger">
                            <i class="ti ti-eye-off"></i> Hide
                          </div>
                        </div>
                      </th>

                      <!-- Action -->
                      <th
                        style="position: relative"
                        class="header-th"
                        data-col="7"
                      >
                        <div class="d-flex align-items-center gap-1 th-label">
                          <i class="ti ti-tool me-1"></i>
                          <span>Action</span>
                          <i class="ti ti-chevron-down header-arrow"></i>
                          <button
                            class="category-menu-btn"
                            type="button"
                            onclick="toggleGenericMenu(event, this)"
                          >
                            <i class="ti ti-dots"></i>
                          </button>
                        </div>

                        <div class="category-dropdown d-none">
                          <div
                            class="dropdown-item"
                            onclick="toggleGenericSort(this)"
                          >
                            <i class="ti ti-arrows-sort"></i>
                            <span class="sort-label">Sort A → Z</span>
                          </div>
                          <div
                            class="dropdown-item d-flex justify-content-between"
                          >
                            <span><i class="ti ti-filter"></i> Filter</span>
                            <i class="ti ti-chevron-right"></i>
                          </div>
                          <div class="dropdown-item text-danger">
                            <i class="ti ti-eye-off"></i> Hide
                          </div>
                        </div>
                      </th>

                      <!-- Due Date -->
                      <th
                        style="position: relative"
                        class="header-th"
                        data-col="8"
                      >
                        <div class="d-flex align-items-center gap-1 th-label">
                          <i class="ti ti-calendar-time me-1"></i>
                          <span>Due Date</span>
                          <i class="ti ti-chevron-down header-arrow"></i>
                          <button
                            class="category-menu-btn"
                            type="button"
                            onclick="toggleGenericMenu(event, this)"
                          >
                            <i class="ti ti-dots"></i>
                          </button>
                        </div>

                        <div class="category-dropdown d-none">
                          <div
                            class="dropdown-item"
                            onclick="toggleGenericSort(this)"
                          >
                            <i class="ti ti-arrows-sort"></i
                            ><span class="sort-label">Sort A → Z</span>
                          </div>
                          <div
                            class="dropdown-item d-flex justify-content-between"
                          >
                            <span><i class="ti ti-filter"></i> Filter</span>
                            <i class="ti ti-chevron-right"></i>
                          </div>
                          <div class="dropdown-item text-danger">
                            <i class="ti ti-eye-off"></i> Hide
                          </div>
                        </div>
                      </th>

                      <!-- Closed -->
                      <th
                        style="position: relative"
                        class="header-th"
                        data-col="9"
                      >
                        <div class="d-flex align-items-center gap-1 th-label">
                          <i class="ti ti-clock me-1"></i>
                          <span>Closed</span>
                          <i class="ti ti-chevron-down header-arrow"></i>
                          <button
                            class="category-menu-btn"
                            type="button"
                            onclick="toggleGenericMenu(event, this)"
                          >
                            <i class="ti ti-dots"></i>
                          </button>
                        </div>

                        <div class="category-dropdown d-none">
                          <div
                            class="dropdown-item"
                            onclick="toggleGenericSort(this)"
                          >
                            <i class="ti ti-arrows-sort"></i>
                            <span class="sort-label">Sort A → Z</span>
                          </div>
                          <div
                            class="dropdown-item d-flex justify-content-between"
                          >
                            <span><i class="ti ti-filter"></i> Filter</span>
                            <i class="ti ti-chevron-right"></i>
                          </div>
                          <div class="dropdown-item text-danger">
                            <i class="ti ti-eye-off"></i> Hide
                          </div>
                        </div>
                      </th>

                      <th><i class="ti ti-dots me-1"></i> Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- Case 1 - High Risk / Resident -->
                    <tr style="border-left: 4px solid #d32f2f">
                      <td>Vulnerable Resident Safety Concern</td>
                      <td>12/03/24</td>
                      <td class="text-danger fw-bold">CAT1</td>
                      <td>Building A - Room 102</td>
                      <td>Neighbour Report</td>
                      <td>Urgent Review</td>
                      <td>Intervention</td>
                      <td>14/03/24</td>
                      <td>-</td>
                      <td>
                        <i class="ti ti-edit me-2"></i
                        ><i class="ti ti-trash"></i>
                      </td>
                    </tr>

                    <!-- Case 2 - Medium Risk / Employee -->
                    <tr style="border-left: 4px solid #f4b400">
                      <td>Workplace Harassment Case</td>
                      <td>05/03/24</td>
                      <td style="color: #d49a00; font-weight: 600">CAT2</td>
                      <td>Head Office</td>
                      <td>HR Team</td>
                      <td>In Review</td>
                      <td>Interview Scheduled</td>
                      <td>15/03/24</td>
                      <td>-</td>
                      <td>
                        <i class="ti ti-edit me-2"></i
                        ><i class="ti ti-trash"></i>
                      </td>
                    </tr>

                    <!-- Case 3 - Low Risk / Resident -->
                    <tr style="border-left: 4px solid #4caf50">
                      <td>Routine Welfare Check</td>
                      <td>01/03/24</td>
                      <td style="color: #2e7d32; font-weight: 600">CAT3</td>
                      <td>Building C</td>
                      <td>Safeguarding Officer</td>
                      <td>Complete</td>
                      <td>Report Filed</td>
                      <td>05/03/24</td>
                      <td>05/03/24</td>
                      <td>
                        <i class="ti ti-edit me-2"></i
                        ><i class="ti ti-trash"></i>
                      </td>
                    </tr>

                    <!-- Case 4 -->
                    <tr style="border-left: 4px solid #d32f2f">
                      <td>Domestic Risk Concern</td>
                      <td>10/03/24</td>
                      <td class="text-danger fw-bold">CAT1</td>
                      <td>Building B - Flat 205</td>
                      <td>Support Worker</td>
                      <td>Open</td>
                      <td>Home Visit</td>
                      <td>12/03/24</td>
                      <td>-</td>
                      <td>
                        <i class="ti ti-edit me-2"></i
                        ><i class="ti ti-trash"></i>
                      </td>
                    </tr>

                    <!-- Case 5 -->
                    <tr style="border-left: 4px solid #f4b400">
                      <td>Behavioural Conflict - Staff Member</td>
                      <td>03/03/24</td>
                      <td style="color: #d49a00; font-weight: 600">CAT2</td>
                      <td>Admin Office</td>
                      <td>Employee</td>
                      <td>In Progress</td>
                      <td>Documentation</td>
                      <td>18/03/24</td>
                      <td>-</td>
                      <td>
                        <i class="ti ti-edit me-2"></i
                        ><i class="ti ti-trash"></i>
                      </td>
                    </tr>

                    <!-- Case 6 -->
                    <tr style="border-left: 4px solid #4caf50">
                      <td>Resident Support Follow-Up</td>
                      <td>04/03/24</td>
                      <td style="color: #2e7d32; font-weight: 600">CAT3</td>
                      <td>Community Housing</td>
                      <td>Care Supervisor</td>
                      <td>Open</td>
                      <td>Support Call</td>
                      <td>10/03/24</td>
                      <td>-</td>
                      <td>
                        <i class="ti ti-edit me-2"></i
                        ><i class="ti ti-trash"></i>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- /Page Wrapper -->
    </div>

    <!-- JS Files -->
    <script src="../assets/js/jquery-3.7.1.min.js"></script>
    <script src="../assets/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/script.js"></script>
    <!-- Case View Modal -->
    <div class="modal fade" id="caseModal" tabindex="-1">
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Case Details</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>

          <div class="modal-body">
            <div id="caseContent">
              <!-- Auto-filled content goes here -->
              Loading...
            </div>
          </div>

          <div class="modal-footer">
            <button class="btn btn-secondary" data-bs-dismiss="modal">
              Close
            </button>
            <button class="btn btn-primary">Edit Case</button>
          </div>
        </div>
      </div>
    </div>
    <script>
      // When clicking a table row OR edit icon → open modal
      $(document).on("click", "table tbody tr, .ti-edit", function (e) {
        e.stopPropagation(); // Avoid double triggers

        const row = $(this).closest("tr");
        const caseTitle = row.find("td:nth-child(1)").text();
        const opened = row.find("td:nth-child(2)").text();
        const category = row.find("td:nth-child(3)").text();
        const location = row.find("td:nth-child(4)").text();
        const reportedBy = row.find("td:nth-child(5)").text();
        const status = row.find("td:nth-child(6)").text();
        const action = row.find("td:nth-child(7)").text();
        const dueDate = row.find("td:nth-child(8)").text();
        const closed = row.find("td:nth-child(9)").text();

        // Fill modal content
        $("#caseContent").html(`
      <div class="row g-3">
        <div class="col-md-6"><strong>Case Title:</strong> ${caseTitle}</div>
        <div class="col-md-6"><strong>Date Opened:</strong> ${opened}</div>
        
        <div class="col-md-6"><strong>Category:</strong> ${category}</div>
        <div class="col-md-6"><strong>Location:</strong> ${location}</div>

        <div class="col-md-6"><strong>Reported By:</strong> ${reportedBy}</div>
        <div class="col-md-6"><strong>Status:</strong> ${status}</div>

        <div class="col-md-6"><strong>Action:</strong> ${action}</div>
        <div class="col-md-6"><strong>Due Date:</strong> ${dueDate}</div>

        <div class="col-md-12"><strong>Closed:</strong> ${closed}</div>
      </div>
    `);

        // Show popup
        const modal = new bootstrap.Modal(document.getElementById("caseModal"));
        modal.show();
      });
    </script>

    <script>
      // Sidebar toggle (collapse / expand)
      $(document).on("click", "#toggle_btn", function () {
        $("body").toggleClass("mini-sidebar");

        if (!$("body").hasClass("mini-sidebar")) {
          $(".subdrop + ul").slideDown();
        } else {
          $(".subdrop + ul").slideUp();
        }

        return false;
      });
    </script>

    <script>
      function toggleGenericMenu(event, btn) {
        event.stopPropagation();

        const dropdown = btn.closest("th").querySelector(".category-dropdown");
        const isOpen = !dropdown.classList.contains("d-none");

        // Close all first
        document.querySelectorAll(".category-dropdown").forEach((menu) => {
          menu.classList.add("d-none");
        });

        // Toggle only this one
        if (!isOpen) {
          dropdown.classList.remove("d-none");
        }
      }

      /* Close all dropdowns on outside click */
      document.addEventListener("click", function () {
        document.querySelectorAll(".category-dropdown").forEach((menu) => {
          menu.classList.add("d-none");
        });
      });

      /* Prevent dropdown click from closing itself */
      document.querySelectorAll(".category-dropdown").forEach((dd) => {
        dd.addEventListener("click", function (e) {
          e.stopPropagation();
        });
      });
    </script>

    <script>
      let genericSortState = {}; // keeps state per column

      function toggleGenericSort(el) {
        const th = el.closest("th");
        const colIndex = Number(th.dataset.col);
        if (Number.isNaN(colIndex)) return;

        const table = document.querySelector("table");
        const tbody = table.querySelector("tbody");
        const rows = Array.from(tbody.querySelectorAll("tr"));

        // ✅ init only once
        if (!(colIndex in genericSortState)) {
          genericSortState[colIndex] = true; // first time: A → Z
        }
        const isAZ = genericSortState[colIndex];

        rows.sort((a, b) => {
          let A = a.children[colIndex].innerText.trim();
          let B = b.children[colIndex].innerText.trim();

          // Try date sort first
          if (!isNaN(Date.parse(A)) && !isNaN(Date.parse(B))) {
            return isAZ ? new Date(A) - new Date(B) : new Date(B) - new Date(A);
          }

          A = A.toUpperCase();
          B = B.toUpperCase();
          return isAZ ? A.localeCompare(B) : B.localeCompare(A);
        });

        rows.forEach((row) => tbody.appendChild(row));

        // Update label text
        const label = el.querySelector(".sort-label");
        if (label) {
          label.innerText = isAZ ? "Sort Z → A" : "Sort A → Z";
        }

        // ✅ flip state for next click
        genericSortState[colIndex] = !isAZ;

        const dropdown = th.querySelector(".category-dropdown");
        if (dropdown) dropdown.classList.add("d-none");
      }
    </script>

    <script>
      function hideGenericColumn(el) {
        const th = el.closest("th");
        const colIndex = parseInt(th.dataset.col);
        const table = document.querySelector("table");

        // Hide header
        th.style.display = "none";

        // Hide column cells
        table.querySelectorAll("tbody tr").forEach((row) => {
          row.children[colIndex].style.display = "none";
        });
      }
    </script>

    <script>
      let isCategorySortedAZ = true; // default state

      function toggleCategorySort() {
        const table = document.querySelector("table");
        const tbody = table.querySelector("tbody");
        const rows = Array.from(tbody.querySelectorAll("tr"));

        rows.sort((a, b) => {
          const catA = a.children[2].innerText.trim().toUpperCase(); // Category column
          const catB = b.children[2].innerText.trim().toUpperCase();

          return isCategorySortedAZ
            ? catA.localeCompare(catB) // A → Z
            : catB.localeCompare(catA); // Z → A
        });

        // Re-append rows
        rows.forEach((row) => tbody.appendChild(row));

        // Toggle label text
        const label = document.getElementById("sortLabel");
        label.innerText = isCategorySortedAZ ? "Sort Z → A" : "Sort A → Z";

        // Flip state
        isCategorySortedAZ = !isCategorySortedAZ;

        // Close dropdown
        document.getElementById("categoryDropdown").classList.add("d-none");
      }
    </script>
    <script>
      function toggleCategoryMenu(event) {
        event.stopPropagation();
        const dropdown = document.getElementById("categoryDropdown");
        dropdown.classList.toggle("d-none");
      }

      // Close menu when clicking outside
      document.addEventListener("click", function () {
        const dd = document.getElementById("categoryDropdown");
        if (dd && !dd.classList.contains("d-none")) {
          dd.classList.add("d-none");
        }
      });
    </script>
  </body>
</html>
